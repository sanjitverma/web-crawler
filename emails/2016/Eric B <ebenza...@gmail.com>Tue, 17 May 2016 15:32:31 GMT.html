<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: mvn -U dependency:sources re-downloads released sources JARs</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201605.mbox/%3c5e093cfa80b841c9a61d5c0231cab24f@VFLON-XCHMBX3.virtuefusion.corp%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201605.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201605.mbox/%3c8651c265f7fd4927b28fa221259325e2@VFLON-XCHMBX3.virtuefusion.corp%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201605.mbox/%3c5e093cfa80b841c9a61d5c0231cab24f@VFLON-XCHMBX3.virtuefusion.corp%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201605.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201605.mbox/%3c20160517200130.00005a24.ecki@zusammenkunft.net%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201605.mbox/%3c5e093cfa80b841c9a61d5c0231cab24f@VFLON-XCHMBX3.virtuefusion.corp%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201605.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201605.mbox/%3c8651c265f7fd4927b28fa221259325e2@VFLON-XCHMBX3.virtuefusion.corp%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201605.mbox/%3c5e093cfa80b841c9a61d5c0231cab24f@VFLON-XCHMBX3.virtuefusion.corp%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201605.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201605.mbox/%3c20160517200130.00005a24.ecki@zusammenkunft.net%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Eric B &lt;ebenza...@gmail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: mvn -U dependency:sources re-downloads released sources JARs</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Tue, 17 May 2016 15:32:31 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
I would suggest that the help documentation is wrong.  To my knowledge,
Maven always tries to update the snapshots at every invocation - precisely
the concept of the snapshot.  For full releases, however, Maven won't try
to re-download releases if they are already in the local repo, or if it has
already tried to find (and failed) a release within a predetermined elapsed
time.

I've always understood the -U parameter to force maven to check for
different versions than what already exists in the local repo, and to force
Maven to recheck for the existance of a dependency, even it has already
tried and failed.

Thanks,

Eric


On Tue, May 17, 2016 at 11:04 AM, Adam Mitchell &lt;Adam.Mitchell@playtech.com&gt;
wrote:

&gt; Whilst that's true of the maven documentation, when you start digging into
&gt; how it's used during artifact resolution it acts as an override for a
&gt; repository's update policy.
&gt;
&gt; (from 3.3.9 release)
&gt;
&gt; It ends up set on
&gt; org.apache.maven.artifact.repository.RepositoryRequest#isForceUpdate()
&gt;
&gt;     /**
&gt;      * Indicates whether remote repositories should be re-checked for
&gt; updated artifacts/metadata regardless of their
&gt;      * configured update policy.
&gt;      *
&gt;      * @return {@code true} if remote repositories should be re-checked
&gt; for updated artifacts/metadata, {@code false}
&gt;      *         otherwise.
&gt;      */
&gt;     boolean isForceUpdate();
&gt;
&gt;     /**
&gt;      * Enables/disabled forced checks for updated artifacts/metadata on
&gt; remote repositories.
&gt;      *
&gt;      * @param forceUpdate {@code true} to forcibly check the remote
&gt; repositories for updated artifacts/metadata, {@code
&gt;      *            false} to use the update policy configured on each
&gt; repository.
&gt;      * @return This request, never {@code null}.
&gt;      */
&gt;     RepositoryRequest setForceUpdate( boolean forceUpdate );
&gt;
&gt; Or in the case where you end up in aether, it sets your repository session
&gt; to always update:
&gt; org.apache.maven.internal.aether.DefaultRepositorySystemSessionFactory:114
&gt;         else if ( request.isUpdateSnapshots() )
&gt;         {
&gt;             session.setUpdatePolicy( RepositoryPolicy.UPDATE_POLICY_ALWAYS
&gt; );
&gt;         }
&gt;
&gt; The net result is the same.
&gt;
&gt; Though I admit that I wouldn't expect this to necessarily re-download
&gt; source code unless the metadata was corrupt/missing, it certainly has more
&gt; meaning that just update snapshots.
&gt;
&gt; Quite possibly a bug in maven-core then.
&gt;
&gt;
&gt;
&gt;
&gt; | Adam Mitchell | Java Software Architect | Tel: +44 (0)207 633 3570 |
&gt; Mobile:  | Skype:  | www.playtech.com
&gt;
&gt; This communication contains information which is privileged and
&gt; confidential and is exclusively intended only for the individual or entity
&gt; named above (recipient(s)). If you are not the intended recipient(s) or the
&gt; person responsible for delivering it to the intended recipient(s), you are
&gt; hereby notified that any review, disclosure, dissemination, distribution or
&gt; reproduction of this communication message in any way or act is prohibited.
&gt; If you receive this communication by mistake please notify the sender
&gt; immediately and then destroy any copies of it. Please note that the sender
&gt; monitors e-mails sent or received. Thank you.
&gt; -----Original Message-----
&gt; From: Thomas Broyer [mailto:t.broyer@gmail.com]
&gt; Sent: 17 May 2016 11:03
&gt; To: Maven Users List &lt;users@maven.apache.org&gt;
&gt; Subject: Re: mvn -U dependency:sources re-downloads released sources JARs
&gt;
&gt; On Tue, May 17, 2016 at 11:29 AM Adam Mitchell &lt;Adam.Mitchell@playtech.com
&gt; &gt;
&gt; wrote:
&gt;
&gt; &gt; -U is force update, it tells maven to ignore locally cached artifacts
&gt; &gt; and to download them afresh, what behaviour were you expecting?
&gt; &gt;
&gt;
&gt; -U stands for "update-snapshots" and aims at downloading only "missing
&gt; releases" (and "updated snapshots", of course).
&gt;
&gt; $ mvn -h
&gt;
&gt; usage: mvn [options] [&lt;goal(s)&gt;] [&lt;phase(s)&gt;]
&gt;
&gt; Options:
&gt; [â€¦]
&gt;  -U,--update-snapshots                  Forces a check for missing
&gt;                                         releases and updated snapshots on
&gt;                                         remote repositories $ mvn -v
&gt; Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5;
&gt; 2015-11-10T17:41:47+01:00)
&gt; Maven home: /mnt/ssd/tbr/tools/maven
&gt; Java version: 1.8.0_91, vendor: Oracle Corporation Java home:
&gt; /usr/lib/jvm/java-8-oracle/jre Default locale: fr_FR, platform encoding:
&gt; UTF-8 OS name: "linux", version: "4.4.0-22-generic", arch: "amd64", family:
&gt; "unix"
&gt;
&gt; ---------------------------------------------------------------------
&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;

</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li>Unnamed multipart/alternative (inline, None, 0 bytes)</li>
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201605.mbox/raw/%3cCA+T+PjHWE+z4Omtfh6FGKzYhUzUZSBWHD1914+YZxDoKVg7KPw@mail.gmail.com%3e/1">Unnamed text/plain</a> (inline, Quoted Printable, 4693 bytes)</li>
</ul>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201605.mbox/raw/%3cCA+T+PjHWE+z4Omtfh6FGKzYhUzUZSBWHD1914+YZxDoKVg7KPw@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
