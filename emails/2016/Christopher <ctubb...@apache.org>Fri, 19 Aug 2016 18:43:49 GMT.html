<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: Create test jar during build without attaching</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201608.mbox/%3cCALN=NUE8tPstSSZ_QecRztARv6qT_rgQbF9JvZwG0O8Hr4F+FA@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201608.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201608.mbox/%3cCAL5zq9ZF=3pzqOeD18ZrjF2yGUn3Dqz_q-T-fNva6jhqQ=Jv-w@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201608.mbox/%3cCAK8jvqzvg6R6FTgAjAG6-=f8dC3mM6S9biXOV=uYtsE9OBPTpA@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201608.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201608.mbox/%3cCAKumxBybYGWpS+K8x3b2GqQ43iB47ars3g2JNHbXLVxuHrzF3w@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201608.mbox/%3cCALN=NUE8tPstSSZ_QecRztARv6qT_rgQbF9JvZwG0O8Hr4F+FA@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201608.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201608.mbox/%3cCAL5zq9ZF=3pzqOeD18ZrjF2yGUn3Dqz_q-T-fNva6jhqQ=Jv-w@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201608.mbox/%3cCAK8jvqzvg6R6FTgAjAG6-=f8dC3mM6S9biXOV=uYtsE9OBPTpA@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201608.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201608.mbox/%3cCAKumxBybYGWpS+K8x3b2GqQ43iB47ars3g2JNHbXLVxuHrzF3w@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Christopher &lt;ctubb...@apache.org&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: Create test jar during build without attaching</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Fri, 19 Aug 2016 18:43:49 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
It is a test resource, built from source. I think it's substantively
different from a jpg, because it is derived from the creative work (source
code), and does not itself represent the creative work like a jpg does.
Compiled code does not meet the definition of open source from the Open
Source Initiative (https://opensource.org/osd), and we'd prefer to keep our
source code free from compiled code as much as possible. So, even if it
would be an "acceptable" case, we're trying to find a solution which avoids
that. We were actually doing that until recently, and we're trying to take
positive action to correct it.

In any case, my goal for this thread was to find solutions which allow me
to avoid having the binary in SCM, not to convince myself I don't need to.
:)

On Fri, Aug 19, 2016 at 4:44 AM Mirko Friedenhagen &lt;mfriedenhagen@gmail.com&gt;
wrote:

&gt; Hello Christopher,
&gt;
&gt; it seems the jar is a test resource, so it is not different from a jpg
&gt; which could be included as well in this way IMO.
&gt;
&gt; Regards
&gt; Mirko
&gt; --
&gt; Sent from my mobile
&gt;
&gt; Am 19.08.2016 03:47 schrieb "Christopher" &lt;ctubbsii@apache.org&gt;:
&gt;
&gt; If this were a personal project, I'd probably do that... but this is for an
&gt; ASF project, and I don't want to put us in a position where we are
&gt; releasing with binaries in the source artifact.
&gt;
&gt; On Thu, Aug 18, 2016 at 9:39 PM jieryn &lt;jieryn@gmail.com&gt; wrote:
&gt;
&gt; &gt; Create the jar and then put it under src/test/resources/my.jar and
&gt; &gt; then refer to that my.jar in your testcase. It seems like an awful lot
&gt; &gt; of trouble to dynamically create this test artifact, when you could
&gt; &gt; just create it once and then add it to your repository. Yes, adding
&gt; &gt; jars to your scm is generally bad, but this seems like a perfect
&gt; &gt; exception.
&gt; &gt;
&gt; &gt; On Thu, Aug 18, 2016 at 9:36 PM, Christopher &lt;ctubbsii@apache.org&gt;
&gt; wrote:
&gt; &gt; &gt; Hi Maven Users list,
&gt; &gt; &gt;
&gt; &gt; &gt; What's the best way to create a jar during a build without attaching
&gt; it?
&gt; &gt; &gt;
&gt; &gt; &gt; Currently, our pom is configured to use the maven-jar-plugin to create
&gt; &gt; it,
&gt; &gt; &gt; but that plugin attaches an artifact, which gets deployed. We don't
&gt; want
&gt; &gt; &gt; that. That doesn't seem to be configurable.
&gt; &gt; &gt;
&gt; &gt; &gt; We could create a mini project and use maven-invoker-plugin to package
&gt; &gt; it,
&gt; &gt; &gt; but that's a lot of overhead (configuration and processing time) for a
&gt; &gt; very
&gt; &gt; &gt; small test jar containing a single file (used to test a classloader).
&gt; &gt; &gt;
&gt; &gt; &gt; We've also considered just using maven-exec-plugin to execute the jar
&gt; &gt; &gt; command-line tool, but that's tricky to get right, accounting for
&gt; &gt; &gt; JAVA_HOME, toolchains, etc.
&gt; &gt; &gt;
&gt; &gt; &gt; Any suggestions, or is maven-invoker-plugin the best option?
&gt; &gt; &gt;
&gt; &gt; &gt; I think the maven-assembly-plugin might be able to do it, and it has an
&gt; &gt; &gt; &lt;attach&gt;false&lt;/attach&gt; option, but I've never used it like this
before.
&gt; &gt; If
&gt; &gt; &gt; that's the best option, does anybody have any examples of that kind of
&gt; &gt; &gt; thing?
&gt; &gt; &gt;
&gt; &gt; &gt; Thanks.
&gt; &gt;
&gt; &gt; ---------------------------------------------------------------------
&gt; &gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt; &gt; For additional commands, e-mail: users-help@maven.apache.org
&gt; &gt;
&gt; &gt;
&gt;

</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li>Unnamed multipart/alternative (inline, None, 0 bytes)</li>
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201608.mbox/raw/%3cCAL5zq9Z82zJLz7EEJRY3aMC1wr-frfK4NaAVsFCsTr=K3NtOfg@mail.gmail.com%3e/1">Unnamed text/plain</a> (inline, None, 3194 bytes)</li>
</ul>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201608.mbox/raw/%3cCAL5zq9Z82zJLz7EEJRY3aMC1wr-frfK4NaAVsFCsTr=K3NtOfg@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
