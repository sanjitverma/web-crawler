<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: building platform specific eclipse RCP plugins</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201610.mbox/%3c20161013163322.4E0CA29C1120@dd17332.kasserver.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201610.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201610.mbox/%3cCADN69ymRxd-3_LF-n1St-uFap-Oc7UA0kswVBWisfWiudurX4Q@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201610.mbox/%3cHE1PR0601MB2379EE9C6E79BDA260CCA95F8BDC0@HE1PR0601MB2379.eurprd06.prod.outlook.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201610.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201610.mbox/%3cCALhtWkfXx8b_gkDRRn1o92i6XB2dezRiT0q6Y5kDa8Vj3nRy7A@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201610.mbox/%3c20161013163322.4E0CA29C1120@dd17332.kasserver.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201610.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201610.mbox/%3cCADN69ymRxd-3_LF-n1St-uFap-Oc7UA0kswVBWisfWiudurX4Q@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201610.mbox/%3cHE1PR0601MB2379EE9C6E79BDA260CCA95F8BDC0@HE1PR0601MB2379.eurprd06.prod.outlook.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201610.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201610.mbox/%3cCALhtWkfXx8b_gkDRRn1o92i6XB2dezRiT0q6Y5kDa8Vj3nRy7A@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Jim Klo &lt;jim....@sri.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: building platform specific eclipse RCP plugins</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Thu, 13 Oct 2016 17:48:20 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
I’m not sure I fully follow what’s going on, however I’m not sure what you want to do
can be easily done in a single reactor build.  It can possibly be done, but you’d need break
things into a lot of modules.

My first question is are you building features that are OS specific or agnostic?  Are your
plugin modules that are OS specific, are the essentially the same plugin with just native
bits? i.e.
	Feature ABC (win32 &amp; linux)
		- Plugin 123 (win32)
		- Plugin 123 (linux)

or is it:
	Feature ABC
		- Plugin 123 (win32)
		- Plugin 456 (linux)


I’m also not quite sure what you mean by OS flag… need more info, as it’s unclear as
to what property you expect maven to respond.

FWIW: I’ve got an RCP project that I have targets of Windows, OS X, and Linux; which contains
a mix of native and java code.

Albeit our project is rather large… it takes 3 hours to build the native artifacts alone.
The process I follow is:

1. Reactor build for each of the native pieces, and then convert these to an artifact that
can be installed.
2. Reactor build for the RCP app which depends upon the native artifacts of which I use the
maven-dependency-plugin:unpack during the prepare-package phase to unpack the dependencies
into the right location within the plugin.
	- each module handles all os platforms as needed - usually this is only needed in a packaging
step; unless you have tests in platform independent code that depend upon the native bits.
	- ultimately what this means that the director plugin is going to create multiple output
folders for each architecture; hence you need to know which native dependency needs to be
placed where.

FWIW, I’ve never had any luck in building a single OS target at a time, mostly because the
dependencies of the product include all OS’s (and there’s not an easy way to filter the
.product file.)

The pattern that mine follows would be more like:

	Feature ABC
		- Plugin 123 (osx, win32, linux)
		- Plugin 456 (osx)
		- Plugin 789 (platform independent)


Also you might try the Tycho List (tycho-user@eclipse.org &lt;mailto:tycho-user@eclipse.org&gt;)
as tycho does not exactly behave like normal maven in that it’s Manifest First vs POM First
dependencies.  If you don’t have a good understanding of how that all works, you’ll have
a really hard time getting multi-platform build with native elements working right.

- JK
		

&gt; On Oct 13, 2016, at 4:18 AM, Rene Tassy &lt;Rene.Tassy@telit.com&gt; wrote:
&gt; 
&gt; Hi
&gt;  
&gt; I am currently developing an eclipse RCP application and one of my features includes
a few platform specific plugins.
&gt; In other words some of those plugins have o/s flag equal to “win32” and some others
“linux”.
&gt;  
&gt; Having this flag breaks my maven build because when building the feature on windows it
cannot see the linux plugins and vice-versa.
&gt; Is there something I can specify in my pom.xml so that the RCP o/s flag is picked by
maven ?
&gt;  
&gt; Here is how my pom.xml looks like : 
&gt;  
&gt; &lt;?xml version="1.0" encoding="UTF-8"?&gt;
&gt; &lt;project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 &lt;http://maven.apache.org/POM/4.0.0&gt;
http://maven.apache.org/xsd/maven-4.0.0.xsd &lt;http://maven.apache.org/xsd/maven-4.0.0.xsd&gt;"
xmlns="http://maven.apache.org/POM/4.0.0 &lt;http://maven.apache.org/POM/4.0.0&gt;"
&gt;                                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance
&lt;http://www.w3.org/2001/XMLSchema-instance&gt;"&gt;
&gt;                 &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
&gt;                 &lt;groupId&gt;group_id &lt;/groupId&gt;
&gt;                 &lt;artifactId&gt;artifact_id&lt;/artifactId&gt;
&gt;                 &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
&gt;                 &lt;packaging&gt;pom&lt;/packaging&gt;
&gt;  
&gt;                 &lt;properties&gt;
&gt;                     &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
&gt;                 &lt;/properties&gt;
&gt;  
&gt;                 &lt;repositories&gt;
&gt;                                 &lt;repository&gt;
&gt;                                                 &lt;id&gt;mars&lt;/id&gt;
&gt;                                                 &lt;layout&gt;p2&lt;/layout&gt;
&gt;                                                 &lt;url&gt;http://download.eclipse.org/releases/mars&lt;/url&gt;
&lt;http://download.eclipse.org/releases/mars%3C/url%3E&gt;
&gt;                                 &lt;/repository&gt;
&gt;  
&gt;                                 &lt;repository&gt;
&gt;                                                 &lt;id&gt;eclipse-cdt&lt;/id&gt;
&gt;                                                 &lt;url&gt;http://download.eclipse.org/tools/cdt/builds/luna/milestones/&lt;/url&gt;
&lt;http://download.eclipse.org/tools/cdt/builds/luna/milestones/%3C/url%3E&gt;
&gt;                                                 &lt;layout&gt;p2&lt;/layout&gt;
&gt;                                 &lt;/repository&gt;
&gt;  
&gt;                                 &lt;repository&gt;
&gt;                                                 &lt;id&gt;eclipse-pydev&lt;/id&gt;
&gt;                                                 &lt;url&gt;https://dl.bintray.com/fabioz/pydev/4.5.0&lt;/url&gt;
&lt;https://dl.bintray.com/fabioz/pydev/4.5.0%3C/url%3E&gt;
&gt;                                                 &lt;layout&gt;p2&lt;/layout&gt;
&gt;                                 &lt;/repository&gt;
&gt;  
&gt;                 &lt;/repositories&gt;
&gt;                 &lt;modules&gt;
&gt;                                 &lt;module&gt; feature1  &lt;/module&gt;
&gt;                                 &lt;module&gt; plugin1 of feature1 with windows o/s flag
 &lt;/module&gt;
&gt;                                 &lt;module&gt; plugin2 of feature1 with linux o/s flag
 &lt;/module&gt;
&gt;  
&gt;                 &lt;/modules&gt;
&gt;                 &lt;build&gt;
&gt;                                 &lt;plugins&gt;
&gt;                                                 &lt;plugin&gt;
&gt;                                                                 &lt;groupId&gt;org.eclipse.tycho&lt;/groupId&gt;
&gt;                                                                 &lt;artifactId&gt;tycho-maven-plugin&lt;/artifactId&gt;
&gt;                                                                 &lt;version&gt;0.24.0&lt;/version&gt;
&gt;                                                                 &lt;extensions&gt;true&lt;/extensions&gt;
&gt;                                                 &lt;/plugin&gt;
&gt;  
&gt;                                                 &lt;plugin&gt;
&gt;                                                                 &lt;groupId&gt;org.eclipse.tycho&lt;/groupId&gt;
&gt;                                                                 &lt;artifactId&gt;target-platform-configuration&lt;/artifactId&gt;
&gt;                                                                 &lt;version&gt;0.24.0&lt;/version&gt;
&gt;                                                                 &lt;configuration&gt;
&gt;                                                                 &lt;resolver&gt;p2&lt;/resolver&gt;
&gt;                                                                 &lt;environments&gt;
&gt;                                                                     &lt;environment&gt;
&gt;                                                                                 &lt;os&gt;linux&lt;/os&gt;
&gt;                                                                                 &lt;ws&gt;gtk&lt;/ws&gt;
&gt;                                                                                 &lt;arch&gt;x86_64&lt;/arch&gt;
&gt;                                                                     &lt;/environment&gt;
&gt;                                                                     &lt;environment&gt;
&gt;                                                                                 &lt;os&gt;linux&lt;/os&gt;
&gt;                                                                                 &lt;ws&gt;gtk&lt;/ws&gt;
&gt;                                                                                 &lt;arch&gt;x86&lt;/arch&gt;
&gt;                                                                     &lt;/environment&gt;
&gt;                                             &lt;environment&gt;
&gt;                                                                                 &lt;os&gt;win32&lt;/os&gt;
&gt;                                                                                 &lt;ws&gt;win32&lt;/ws&gt;
&gt;                                                                                 &lt;arch&gt;x86_64&lt;/arch&gt;
&gt;                                                                     &lt;/environment&gt;
&gt;                                                                     &lt;environment&gt;
&gt;                                                                                 &lt;os&gt;win32&lt;/os&gt;
&gt;                                                                                 &lt;ws&gt;win32&lt;/ws&gt;
&gt;                                                                                 &lt;arch&gt;x86&lt;/arch&gt;
&gt;                                                                     &lt;/environment&gt;
&gt;                                                                 &lt;/environments&gt;
&gt;                                                                 &lt;/configuration&gt;
&gt;                                         &lt;/plugin&gt;
&gt;                                 &lt;/plugins&gt;
&gt;                 &lt;/build&gt;
&gt; &lt;/project&gt;
&gt;  
&gt; Thanks in advance,
&gt; Rene
&gt;  
&gt; Rene Tassy 
&gt; SW Engineer, Application Engineering 
&gt; rene.tassy@telit.com &lt;mailto:rene.tassy@telit.com&gt;
&gt; www.telit.com &lt;http://www.telit.com/&gt;	
&gt;         
&gt;  &lt;http://robustus.impactia.com/AnalyticServer/redirect?cid=15fbbe1bb7e142c9&amp;mid=81604617&amp;eurl=aHR0cDovL3d3dy55b3V0dWJlLmNvbS90ZWxpdGNvbW11bmljYXRpb25z&amp;istmp=enrich@telit.com&gt;
 &lt;http://robustus.impactia.com/AnalyticServer/redirect?cid=15fbbe1bb7e142c9&amp;mid=81604617&amp;eurl=aHR0cHM6Ly9wbHVzLmdvb2dsZS5jb20vK3RlbGl0&amp;istmp=enrich@telit.com&gt;
 &lt;http://robustus.impactia.com/AnalyticServer/redirect?cid=15fbbe1bb7e142c9&amp;mid=81604617&amp;eurl=aHR0cHM6Ly90d2l0dGVyLmNvbS9UZWxpdF9XU19jb3Jw&amp;istmp=enrich@telit.com&gt;
 &lt;http://robustus.impactia.com/AnalyticServer/redirect?cid=15fbbe1bb7e142c9&amp;mid=81604617&amp;eurl=aHR0cDovL2ZhY2Vib29rLmNvbS90ZWxpdHdpcmVsZXNz&amp;istmp=enrich@telit.com&gt;
 &lt;http://robustus.impactia.com/AnalyticServer/redirect?cid=15fbbe1bb7e142c9&amp;mid=81604617&amp;eurl=aHR0cDovL3d3dy5saW5rZWRpbi5jb20vY29tcGFueS90ZWxpdC13aXJlbGVzcy1zb2x1dGlvbnM=&amp;istmp=enrich@telit.com&gt;
&gt; 
&gt; 
&gt; This electronic message, including attachments, is intended only for the use of the individual
or company named above or to which it is addressed.
&gt;  The information contained in this message shall be considered confidential and proprietary,
and may include confidential work product. If you are not the intended recipient, please be
aware that any unauthorized use,
&gt;  dissemination, distribution or copying of this message is strictly prohibited. If you
have received this email in error, please notify the sender by replying to this message and
deleting this email immediately. 
&gt; 
&gt; To the extent this email includes an offer to buy Telit products or an order confirmation,
the offer or order confirmation is governed by Telit’s General Terms and Conditions of Sale,
which are published here &lt;http://www.telit.com/terms-and-conditions/&gt;.
&gt; 



</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li>Unnamed multipart/signed (inline, None, 0 bytes)</li>
<ul>
<li>Unnamed multipart/alternative (inline, None, 0 bytes)</li>
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201610.mbox/raw/%3c8CD07181-30EA-4218-8B65-96D520CF0D45@sri.com%3e/1/1">Unnamed text/plain</a> (inline, Quoted Printable, 11127 bytes)</li>
</ul>
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201610.mbox/raw/%3c8CD07181-30EA-4218-8B65-96D520CF0D45@sri.com%3e/1/2">Unnamed text/html</a> (inline, Quoted Printable, 51130 bytes)</li>
</ul>
</ul>
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201610.mbox/raw/%3c8CD07181-30EA-4218-8B65-96D520CF0D45@sri.com%3e/2">smime.p7s (application/pkcs7-signature)</a> (attachment, Base64, 5282 bytes)</li>
</ul>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201610.mbox/raw/%3c8CD07181-30EA-4218-8B65-96D520CF0D45@sri.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
