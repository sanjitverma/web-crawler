<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: Preleminary Maven 3.4.0-SNAPSHOT Testing (Take 3)</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201608.mbox/%3cCADN69ymD7sjbL7FhtoMnSu=CXOs9Rc2YgGHF5MOdamTm1y7sOg@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201608.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201608.mbox/%3c57AE5269.5020008@schulte.it%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201608.mbox/%3cCADN69ymD7sjbL7FhtoMnSu=CXOs9Rc2YgGHF5MOdamTm1y7sOg@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201608.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201608.mbox/%3c57AE5269.5020008@schulte.it%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201608.mbox/%3cCADN69ymD7sjbL7FhtoMnSu=CXOs9Rc2YgGHF5MOdamTm1y7sOg@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201608.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201608.mbox/%3c57AE5269.5020008@schulte.it%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201608.mbox/%3cCADN69ymD7sjbL7FhtoMnSu=CXOs9Rc2YgGHF5MOdamTm1y7sOg@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201608.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201608.mbox/%3c57AE5269.5020008@schulte.it%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Christian Schulte ...@schulte.it&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: Preleminary Maven 3.4.0-SNAPSHOT Testing (Take 3)</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Fri, 12 Aug 2016 22:28:58 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
Am 08/12/16 um 20:11 schrieb Curtis Rueden:
&gt; Hi Christian,
&gt; 
&gt; Thank you very much for looking at my example, and your speedy reply.
&gt; 
&gt;&gt; Can you please add your objections to MNG-5971 in JIRA.
&gt; 
&gt; Done. I also added the same comments to MNG-6079, which I believe is a
&gt; legitimate regression caused by the fixing of MNG-5971.

Commenting on this @MNG-5971 will make JIRA send emails to the parties
involved in that change. So let's see what they have to say about it.
Maybe you have uncovered an issue no-one has noticed during testing.

&gt; 
&gt;&gt;&gt; 2) I do not know how to restructure my components for Maven 3.4.0 to
&gt;&gt;&gt; avoid this problem.
&gt;&gt;
&gt;&gt; Simply by applying inheritance. This is what MNG-5971 is about.
&gt;&gt; Imported dependencies have not been part of inheritance processing
&gt;&gt; prior 3.4 but should. Think about the import scope as a way to just
&gt;&gt; include some dependencies in the dependency management where it is
&gt;&gt; used.
&gt; ...
&gt;&gt; You could just update your poms to make use of inheritance. You would
&gt;&gt; just need to declare the dependency in question in the dependency
&gt;&gt; management of the inheritance level in question.
&gt; 
&gt; So if I understand correctly: with the new approach, it is no longer
&gt; possible to override the version of a transitive dependency, without adding
&gt; it as a direct dependency of the current project, even though it actually
&gt; isn't? Or is there still a way

It's just about overriding properties. If there are no properties to
interpolate in the current inheritance level, the expression will be
inherited. Regarding the example project attached to MNG-6079: If you
would remove the property 'surefire.version' completely from
'parent-pom.xml', the interpolation would happen at the correct level
(in 'pom.xml') with the value setup in 'pom.xml'. You could add a
profile to 'pom.xml' overriding the property to something else in that
pom. There may be bugs in the current interpolation logic. I am still
reviewing things. So current state of this is: "That's the behaviour
requested and tested during commiting to MNG-5971. Cannot override
properties? Really requested behaviour? Maybe incorrect. Need to look at
it again. There was a reason it got implemented the way it is."

&gt; 
&gt; I would like to draw your attention to another use case my community has.
&gt; Check out this profile:
&gt; 
&gt; * https://github.com/fiji/pom-fiji/blob/pom-fiji-24.3.0/pom.xml#L1064-L1214
&gt; 
&gt; It overrides all managed version properties in the BOM to LATEST, to make
&gt; snapshot coupling in IDEs (particularly Eclipse) less painful.

See above. Overriding properties at the same inheritance level nothing
should have changed.

&gt; My understanding of the MNG-5971 change is that the above hack will no
&gt; longer work. And I cannot see any new way to achieve something similar? How
&gt; do other projects achieve temporary snapshot couplings during development,
&gt; without requiring changes to the local dev environment?
&gt; 
&gt; Yet another wrinkle which occurs to me: What about cases where the version
&gt; property is used in some configuration somewhere, _besides_ in the
&gt; dependency declaration? For example, consider the following configuration
&gt; block:
&gt; 
&gt; &lt;plugin&gt;
&gt; &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
&gt; &lt;version&gt;3.0.2&lt;/version&gt;
&gt; &lt;configuration&gt;
&gt; &lt;archive&gt;
&gt; &lt;manifestEntries&gt;
&gt; &lt;!-- Add SciJava Common version to the JAR manifest. --&gt;
&gt; &lt;SciJava-Common-Version&gt;${scijava-common.version}&lt;/SciJava-Common-Version&gt;
&gt; &lt;/manifestEntries&gt;
&gt; &lt;/archive&gt;
&gt; &lt;/configuration&gt;
&gt; &lt;/plugin&gt;
&gt; 
&gt; Of course, the above example is a little contrived, but surely there are
&gt; real builds in the wild where a dependency version is fed to a plugin
&gt; configuration somewhere? Won't these versions now be "wrong" from the
&gt; perspective of the human -- not matching what is actually in the dependency
&gt; tree?
&gt; 
&gt;&gt; It will also fix builds.
&gt; 
&gt; My main beef is the breakage of backwards compatibility. All my old builds
&gt; which used to work will no longer work. Wouldn't it be better to have some
&gt; new configuration to achieve the desired result for previously broken
&gt; builds? Maven component releases are immutable -- I can't go back and fix
&gt; all my old releases to work with Maven 3.4.0, ever.

In Maven 2, things like the 'import' scope got introduced in patch
releases and were just documented. See the "Dependency Scope" section
here:
&lt;http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html&gt;

import (only available in Maven 2.0.9 or later)

So in my opinion we should have introduced that 'include' scope in 3.4.
It's a minor version increment already, not a patch release. The import
scope as it got introduced in 2.0.9 has been corrected in 3.4, however.
It's like supporting something behaving incorrectly forever and
introduce the corrections as a new feature. To not confuse users, this
is all only about how the "import" scope is implemented. It got changed
from "import dependency declarations not already available in the
effective model after building that effective model" to "include the
dependency delcarations of the imported POM where the import occurs and
then build the effective model with that".

Regards,
-- 
Christian


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201608.mbox/raw/%3c57AE4DAA.3090103@schulte.it%3e/">Unnamed text/plain</a> (inline, 7-Bit, 5366 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201608.mbox/raw/%3c57AE4DAA.3090103@schulte.it%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
