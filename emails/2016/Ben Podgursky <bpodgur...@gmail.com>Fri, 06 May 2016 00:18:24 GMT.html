<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: An idea I had for one way of doing Continuous Delivery with Maven</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201605.mbox/%3cCAPCjjnFM++2_ORDWKuy4TVE_q5VWYDfyuZwxUYbGyRKxZPiS0w@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201605.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201605.mbox/%3cCAC21K-6uovOWUkMZG9t0V=-G6Enps7eLtRJ-hbbELjHWCEK=jA@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201605.mbox/%3cCA+nPnMxSZJW7wN-mZMxr8=Nj_DfJa5_=3dBtAuPWsgGFB82WQA@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201605.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201605.mbox/%3cCAC21K-6uovOWUkMZG9t0V=-G6Enps7eLtRJ-hbbELjHWCEK=jA@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201605.mbox/%3cCAPCjjnFM++2_ORDWKuy4TVE_q5VWYDfyuZwxUYbGyRKxZPiS0w@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201605.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201605.mbox/%3cCAC21K-6uovOWUkMZG9t0V=-G6Enps7eLtRJ-hbbELjHWCEK=jA@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201605.mbox/%3cCA+nPnMxSZJW7wN-mZMxr8=Nj_DfJa5_=3dBtAuPWsgGFB82WQA@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201605.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201605.mbox/%3cCAC21K-6uovOWUkMZG9t0V=-G6Enps7eLtRJ-hbbELjHWCEK=jA@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Ben Podgursky &lt;bpodgur...@gmail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: An idea I had for one way of doing Continuous Delivery with Maven</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Fri, 06 May 2016 00:18:24 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
I see these discussions often, and I wanted to jump in and mention how we
handle continuous deploys, because I feel that it avoids many of the
downsides mentioned here, albeit with some (IMO) minor costs:

- all of our internal dependencies are SNAPSHOT.  we do not do releases,
ever, or ever depend on a fixed version

- we attach to the package phase of our builds an assembly which packages
the artifact and all of the  dependencies it tested against into a tar.gz

- we deploy the tar.gz to our artifact server with a snapshot version (ex,
MY_PROJECT-1.0-deploy.tar.gz)

- when deploying we simply take the last snapshot deploy artifact and unzip
it in production (+ some  config files etc).

so while you use SNAPSHOT versions, you are guaranteed that you are
deploying against tested dependencies.  and you never have to commit
updated dependency versions, do releases, etc.  the only real cost is a bit
of artifact server disk spaceâ€¦ but disk space is incredibly cheap.

On Thu, May 5, 2016 at 2:13 AM, Stephen Connolly &lt;
stephen.alan.connolly@gmail.com&gt; wrote:

&gt; On 5 May 2016 at 10:00, Robert Scholte &lt;rfscholte@apache.org&gt; wrote:
&gt;
&gt; &gt; Hi Stephen, nice blog.
&gt; &gt;
&gt; &gt; There are a few things I'd like to share:
&gt; &gt; - The maven-release-plugin does several checks which ensures that you
&gt; have
&gt; &gt; a reproducible artifact, where checking on SNAPSHOT dependencies is one
&gt; of
&gt; &gt; the most important ones. (you can find a lot patterns based on the
&gt; &gt; versions-maven-plugin on the web, but they forget these checks)
&gt; &gt;
&gt;
&gt; This is one of the reasons why my suggestion is to actually cut a release
&gt; for every commit (just only push the tag - and just the tag - if the
&gt; release goes anywhere)
&gt;
&gt;
&gt; &gt; - I still have this wish to have support a couple of strategies within
&gt; the
&gt; &gt; maven-release-plugin, this could be one as well.
&gt; &gt;
&gt;
&gt; Yes, I think it would be a valuable one to have in the default plugin, for
&gt; sure... and it may need some assistance from the scm plugin too
&gt;
&gt;
&gt; &gt;
&gt; &gt; In a continuous environment is becomes more and more important to be able
&gt; &gt; to reproduce issues, which can be hard when things keep changing. This
&gt; &gt; might even work with SNAPSHOT dependencies if your can get the
&gt; &gt; distributable (either the deployable or executable artifact, assuming
&gt; they
&gt; &gt; contain all the required dependencies) and have a testing setup which can
&gt; &gt; test with this artifact. If you can reproduce it here, you can (re)write
&gt; it
&gt; &gt; as an appropriate test and fix it.
&gt; &gt; So next to all the current tests you need to do regression tests on the
&gt; &gt; distributable as well.
&gt; &gt; As long as this is not possible or secured in your pipeline, you should
&gt; &gt; NEVER EVER want to depend on SNAPSHOT-dependencies.
&gt; &gt;
&gt;
&gt; +1
&gt;
&gt; One that we gain with the approach I suggest is that we can actually use
&gt; versions:resolve-ranges as we know that the pom will not be pushed back to
&gt; master.
&gt;
&gt; Thus developers can keep version ranges in the pom and the CI build will
&gt; resolve the ranges for each "release"
&gt;
&gt; I'd like to find a way to allow resolve-ranges to work with the current
&gt; release plugin flow... my working idea has been to inject e.g. XML PI
&gt; entities into the pom so that we know what range to restore, e.g.
&gt; pre-release pom has
&gt;
&gt; &lt;dependency&gt;
&gt;   ...
&gt;   &lt;version&gt;[1.2,2.0)&lt;/version&gt;
&gt; &lt;/dependency&gt;
&gt;
&gt; which would get resolved into the release pom as
&gt;
&gt; &lt;dependency&gt;
&gt;   ...
&gt;   &lt;version&gt;1.5&lt;?versions-maven-plugin original="[1.2,2.0)"?&gt;&lt;/version&gt;
&gt; &lt;/dependency&gt;
&gt;
&gt; so that when we want to un-pin we can then see the original range and
&gt; up-lift it so that the development pom becomes
&gt;
&gt; &lt;dependency&gt;
&gt;   ...
&gt;   &lt;version&gt;[1.5,2.0)&lt;/version&gt;
&gt; &lt;/dependency&gt;
&gt;
&gt;
&gt;
&gt; &gt;
&gt; &gt; thanks,
&gt; &gt; Robert
&gt; &gt;
&gt; &gt;
&gt; &gt; On Wed, 04 May 2016 21:20:01 +0200, Stephen Connolly &lt;
&gt; &gt; stephen.alan.connolly@gmail.com&gt; wrote:
&gt; &gt;
&gt; &gt; Here's an embryonic idea I had for doing Continuous Delivery with Maven
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; https://www.cloudbees.com/blog/new-way-do-continuous-delivery-maven-and-jenkins-pipeline
&gt; &gt;&gt;
&gt; &gt;&gt; Probably needs a little fleshing out.
&gt; &gt;&gt;
&gt; &gt;&gt; -Stephen
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; ---------------------------------------------------------------------
&gt; &gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt; &gt; For additional commands, e-mail: users-help@maven.apache.org
&gt; &gt;
&gt; &gt;
&gt;

</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li>Unnamed multipart/alternative (inline, None, 0 bytes)</li>
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201605.mbox/raw/%3cCAC21K-5STAvQChxu5=F0DTSuzrvR5Q2En7mY0ZBLer_aZLt1uA@mail.gmail.com%3e/1">Unnamed text/plain</a> (inline, Quoted Printable, 4338 bytes)</li>
</ul>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201605.mbox/raw/%3cCAC21K-5STAvQChxu5=F0DTSuzrvR5Q2En7mY0ZBLer_aZLt1uA@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
