<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: Aw: Re: Re: [Regression] Declared properties could not be modified anymore within a plugin</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201610.mbox/%3cCALhtWke87Euwb=aZwbud5cvYDzwF=kZmy3WamLhexFW4NuisQQ@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201610.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201610.mbox/%3c1476327752492-5883040.post@n5.nabble.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201610.mbox/%3cCALhtWke87Euwb=aZwbud5cvYDzwF=kZmy3WamLhexFW4NuisQQ@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201610.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201610.mbox/%3ctrinity-132fc906-ef58-44ec-89d3-7cda40c19a58-1477552366549@3capp-gmx-bs19%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201610.mbox/%3cCALhtWke87Euwb=aZwbud5cvYDzwF=kZmy3WamLhexFW4NuisQQ@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201610.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201610.mbox/%3c1476327752492-5883040.post@n5.nabble.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201610.mbox/%3cCALhtWke87Euwb=aZwbud5cvYDzwF=kZmy3WamLhexFW4NuisQQ@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201610.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201610.mbox/%3ctrinity-132fc906-ef58-44ec-89d3-7cda40c19a58-1477552366549@3capp-gmx-bs19%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Benson Margulies &lt;bimargul...@gmail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: Aw: Re: Re: [Regression] Declared properties could not be modified anymore within a plugin</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Mon, 10 Oct 2016 14:01:41 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
Now I get the same thing you do. I better see what's broken in my builds.


On Mon, Oct 10, 2016 at 10:00 AM, Benson Margulies
&lt;bimargulies@gmail.com&gt; wrote:
&gt; That's odd. Let me run my test again.
&gt;
&gt;
&gt; On Mon, Oct 10, 2016 at 8:44 AM, Robert Patrick
&gt; &lt;robert.patrick@oracle.com&gt; wrote:
&gt;&gt; I can confirm that it is not possible to override a project property in a plugin
with Maven 3.3.9.  I am not sure what the expected behavior is but trying to override a pre-initialized
value (from command-line -Ds, .mvn/maven.config, or the POM) from a plugin has no effect...
&gt;&gt;
&gt;&gt;
&gt;&gt; -----Original Message-----
&gt;&gt; From: M. Richey [mailto:mrichey@gmx.de]
&gt;&gt; Sent: Monday, October 10, 2016 4:16 AM
&gt;&gt; To: users@maven.apache.org
&gt;&gt; Cc: Maven Users List
&gt;&gt; Subject: Aw: Re: Re: [Regression] Declared properties could not be modified anymore
within a plugin
&gt;&gt;
&gt;&gt; Thanks Benson, but it does not work for me.
&gt;&gt;
&gt;&gt; During the execution it says:
&gt;&gt;
&gt;&gt; [main] [DEBUG] define property osgi-version = "1.0.0.v20161010082844"
&gt;&gt;
&gt;&gt; But in the MANIFEST.MF it says:
&gt;&gt;
&gt;&gt; Manifest-Version: 1.0
&gt;&gt; Built-By: maik
&gt;&gt; demo: bad
&gt;&gt; Created-By: Apache Maven 3.3.9
&gt;&gt; Build-Jdk: 1.8.0_66
&gt;&gt;
&gt;&gt; So, as I said before, during the execution the property gets set and the pre-initialized
value is used afterwards.
&gt;&gt;
&gt;&gt; Best regards,
&gt;&gt;
&gt;&gt; Maik
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt; Gesendet: Samstag, 08. Oktober 2016 um 16:45 Uhr
&gt;&gt;&gt; Von: "Benson Margulies" &lt;bimargulies@gmail.com&gt;
&gt;&gt;&gt; An: "Maven Users List" &lt;users@maven.apache.org&gt;
&gt;&gt;&gt; Betreff: Re: Re: [Regression] Declared properties could not be
&gt;&gt;&gt; modified anymore within a plugin
&gt;&gt;&gt;
&gt;&gt;&gt; https://github.com/benson-basis/prop-override-example
&gt;&gt;&gt;
&gt;&gt;&gt; Seems to be a demo that
&gt;&gt;&gt;
&gt;&gt;&gt; https://github.com/basis-technology-corp/basis-build-helper-maven-plug
&gt;&gt;&gt; in
&gt;&gt;&gt;
&gt;&gt;&gt; overrides properties.
&gt;&gt;&gt;
&gt;&gt;&gt; Using:
&gt;&gt;&gt;
&gt;&gt;&gt; private void defineProperty(String name, String value) {
&gt;&gt;&gt;     if (getLog().isDebugEnabled()) {
&gt;&gt;&gt;       getLog().debug("define property " + name + " = \"" + value + "\"");
&gt;&gt;&gt;     }
&gt;&gt;&gt;     project.getProperties().put(name, value); }
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Tue, Oct 4, 2016 at 4:03 PM, Benson Margulies &lt;bimargulies@gmail.com&gt;
wrote:
&gt;&gt;&gt; &gt; On Tue, Oct 4, 2016 at 5:35 AM, M. Richey &lt;mrichey@gmx.de&gt; wrote:
&gt;&gt;&gt; &gt;&gt; Thanks Benson to point that out, it's a good example.
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; We have several use cases where we modify properties with our plugins.
We have a large variety of our software which to build for up to three brands. For which brand
a specific software is to build is defined outside the poms and provided by our plugin. As
we all know you can't loop inside the poms. So we execute a plugin once for each brand to
find out if this variant should be build for the brand specified. Therefore we defined a property
in the pom.xml, pre-initialized with a default value, and if the software should be build
for one brand, the brand is appended to the list, i.e. the value of the property, during the
execution of our plugin. So the value of the property may be something like "default,brand1,brand3"
after the executions of the plugin.
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; So for us it is a blocker at the moment that one can't modify properties
during the execution of a plugin anymore.
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; Benson, you said you have some of these working with 3.3.9. Can you
give an example of a plugin where this is working? I would like to see how they are doing
it in their code.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; I'd better do a test to ensure that they are working as well as I
&gt;&gt;&gt; &gt; think they are and then get back to you.
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; Kind regards,
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; Maik
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; Gesendet: Sonntag, 02. Oktober 2016 um 22:04 Uhr
&gt;&gt;&gt; &gt;&gt;&gt; Von: "Benson Margulies" &lt;bimargulies@gmail.com&gt;
&gt;&gt;&gt; &gt;&gt;&gt; An: "Maven Users List" &lt;users@maven.apache.org&gt;, info@soebes.de
&gt;&gt;&gt; &gt;&gt;&gt; Betreff: Re: [Regression] Declared properties could not be
&gt;&gt;&gt; &gt;&gt;&gt; modified anymore within a plugin
&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; On Fri, Sep 30, 2016 at 1:50 PM, Karl Heinz Marbaise &lt;khmarbaise@gmx.de&gt;
wrote:
&gt;&gt;&gt; &gt;&gt;&gt; &gt; Hi,
&gt;&gt;&gt; &gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt; On 30/09/16 15:20, mrichey@gmx.de wrote:
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; Hi all,
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; we discovered a problem with properties defined in a pom.xml.
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; Properties could be defined in a pom.xml like:
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &lt;properties&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &lt;myProp&gt;default&lt;/myProp&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; &lt;/properties&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; In a maven plugin we fetch all the properties by calling:
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; Properties projectProps = project.getProperties();
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; Running all this with maven 2 we were able to modify the
value of "myProp"
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; within the plugin by:
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; projectProps.put("myProp", "newValue");
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; So after the execution of the plugin, the property &lt;myProp&gt;
has
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; the value "newValue".
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;&gt; Running all this with maven 3 that does not work anymore.
&gt;&gt;&gt; &gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt; First I would say this is by design wrong, cause if you define
a
&gt;&gt;&gt; &gt;&gt;&gt; &gt; property in the pom file I would like to be sure that it will
be
&gt;&gt;&gt; &gt;&gt;&gt; &gt; kept the value I have given and if a plugin (which could it
be)
&gt;&gt;&gt; &gt;&gt;&gt; &gt; will change that I will be really astonished.
&gt;&gt;&gt; &gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt; Apart from that my question: Why do you need to change existing
&gt;&gt;&gt; &gt;&gt;&gt; &gt; properties and why not changing the in the pom which is more
&gt;&gt;&gt; &gt;&gt;&gt; &gt; clearer than mysteriously chaning a property by a plugin?...
&gt;&gt;&gt; &gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt; Can you give more details about your use case ? Best would
be
&gt;&gt;&gt; &gt;&gt;&gt; &gt; having a real workign example and what kind of problems you
are
&gt;&gt;&gt; &gt;&gt;&gt; &gt; trying to solve with this approach?
&gt;&gt;&gt; &gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt; Kind regards
&gt;&gt;&gt; &gt;&gt;&gt; &gt; Karl Heinz Marbaise
&gt;&gt;&gt; &gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt; ----------------------------------------------------------------
&gt;&gt;&gt; &gt;&gt;&gt; &gt; ----- To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt;&gt;&gt; &gt;&gt;&gt; &gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; Here's why this is important.
&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; Consider a plugin with the job of setting a property, like many
of
&gt;&gt;&gt; &gt;&gt;&gt; the build-helper goals, or the build-number plugin.
&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; Now, consider an IDE. The IDEs don't, in general, know about these
&gt;&gt;&gt; &gt;&gt;&gt; plugins. They get confused when they don't have a value at all.
&gt;&gt;&gt; &gt;&gt;&gt; So, SOP is is to put a harmless default into the POM, and count
on
&gt;&gt;&gt; &gt;&gt;&gt; the plugin overwriting it. I have some of these working with
&gt;&gt;&gt; &gt;&gt;&gt; 3.3.9, so there must be something more subtle going on.
&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt; ------------------------------------------------------------------
&gt;&gt;&gt; &gt;&gt;&gt; --- To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt;&gt;&gt; &gt;&gt;&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; -------------------------------------------------------------------
&gt;&gt;&gt; &gt;&gt; -- To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt;&gt;&gt; &gt;&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; ---------------------------------------------------------------------
&gt;&gt;&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt;&gt;&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; ---------------------------------------------------------------------
&gt;&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt;&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;&gt;
&gt;&gt;
&gt;&gt; ---------------------------------------------------------------------
&gt;&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt;&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;&gt;

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201610.mbox/raw/%3cCALhtWkcP3cK-6sfdR9eXK5q=2YHJfYW4YRdVfy0kn+boXFXcDA@mail.gmail.com%3e/">Unnamed text/plain</a> (inline, Quoted Printable, 7817 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201610.mbox/raw/%3cCALhtWkcP3cK-6sfdR9eXK5q=2YHJfYW4YRdVfy0kn+boXFXcDA@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
