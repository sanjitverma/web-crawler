<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: Need to fully understand bad implications of combined aggregator and parent pom</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201611.mbox/%3cB8D164BED956C5439875951895CB4B2258941F09@CAFRFD1MSGUSRJH.ITServices.sbc.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201611.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201611.mbox/%3cKL1PR01MB09828A05B99E0396F6820B88B58C0@KL1PR01MB0982.apcprd01.prod.exchangelabs.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201611.mbox/%3cB8D164BED956C5439875951895CB4B2258941F09@CAFRFD1MSGUSRJH.ITServices.sbc.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201611.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201611.mbox/%3cCA+nPnMwOiLXs7V-Ss-93et1Xch8JvwHpvhgc1E0j21tsDR-q0Q@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201611.mbox/%3cB8D164BED956C5439875951895CB4B2258941F09@CAFRFD1MSGUSRJH.ITServices.sbc.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201611.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201611.mbox/%3cKL1PR01MB09828A05B99E0396F6820B88B58C0@KL1PR01MB0982.apcprd01.prod.exchangelabs.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201611.mbox/%3cB8D164BED956C5439875951895CB4B2258941F09@CAFRFD1MSGUSRJH.ITServices.sbc.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201611.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201611.mbox/%3cCA+nPnMwOiLXs7V-Ss-93et1Xch8JvwHpvhgc1E0j21tsDR-q0Q@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Benson Margulies &lt;bimargul...@gmail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: Need to fully understand bad implications of combined aggregator and parent pom</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Wed, 30 Nov 2016 03:28:51 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
My experience is precisely the opposite of yours. The most common
practice is for the parent to be the aggregator; it's hard to get the
site plugin, for example, to work right with your preferred structure
where they are different.

I have built many projects with the the one-parent structure, and they
typically have interdependencies between the modules, and they work
fine.  Can you boil this down to a failing case on github? Can you
share some poms?


On Tue, Nov 29, 2016 at 9:19 PM, KARR, DAVID &lt;dk068x@att.com&gt; wrote:
&gt; A while ago, I started working on an existing project with many developers.  The codebase
has a large multi-project Maven build.  The top directory is both an "aggregator" and "parent"
POM, as it has a "modules" list, and all of the child modules have it as their parent POM,
for dependencies and plugins.
&gt;
&gt; I've always believed this is a defective architecture.  I believe that the top-level
directory should have an "aggregator" POM that just lists the modules to build, and a subdirectory
of the top-level directory should have a project that just defines the parent POM, which defines
dependencies and plugins for subprojects to use.
&gt;
&gt; Although I feel this is a "cleaner" architecture, I've never been able to cite specific
problems with the other approach, besides the fact that module changes and dependency/plugin
changes go in the same file, which is still a "cleanliness" argument.
&gt;
&gt; Today I think I saw a real reason why the present architecture is a problem, but I need
to be certain the problem I'm seeing is caused by this, and that the better architecture fixes
this problem, and whether there is a simple workaround in the meantime.
&gt;
&gt; I've been modifying the build to use a completely new intranet maven repo and completely
different groupids for the build artifacts.
&gt;
&gt; I saw errors like this (with elisions):
&gt; -----------------------
&gt; [INFO] Reactor Summary:
&gt; [INFO]
&gt; [INFO] big-parent ......................................... FAILURE [  5.230 s]
&gt; [INFO] some-other-module................................... SKIPPED
&gt; [INFO] another-module...................................... SKIPPED
&gt; [INFO] .....................................................SKIPPED
&gt; [INFO] ------------------------------------------------------------------------
&gt; [INFO] BUILD FAILURE
&gt; [INFO] ------------------------------------------------------------------------
&gt; [INFO] Total time: 8.063 s
&gt; [INFO] Finished at: 2016-11-29T16:23:36-08:00
&gt; [INFO] Final Memory: 41M/1093M
&gt; [INFO] ------------------------------------------------------------------------
&gt; [ERROR] Failed to execute goal on project some-other-module: Could not resolve dependencies
for project com.mycomp.detsusl:some-other-module:bundle:2.0.0-SNAPSHOT: Could not find artifact
com.mycomp.detsusl:another-module:jar:2.0.0-SNAPSHOT in mycomp-public-group (http://mavencentral.it.mycomp.com:8084/nexus/content/repositories/mycomp-public-group/)
-&gt; [Help 1]
&gt; [ERROR]
&gt; ---------------
&gt;
&gt; The "big-parent" module is the top-level directory that is both the aggregator and parent
pom.
&gt;
&gt; Conceptually, I think this is happening because Maven is trying to evaluate dependencies
before those dependencies are built.  Again, I think the "separated" architecture will resolve
this, but before I implement that, I need to understand exactly what is going on here.
&gt;
&gt; In my local workspace, I got around this by simply "cd"ing to the "another-module" directory
and doing a "mvn install", then "cd"ing to "some-other-module", doing the same, and then doing
the same again at the top level. The reality was messier than this, because I had quite a
few modules that I had to build manually this way.
&gt;
&gt; Assuming I'm right that separating the "parent" function from the "aggregator" function
would resolve this, can someone explain exactly what is happening here, how my assumed solution
would resolve this, and whether there's a cleaner temporary workaround besides "cd"ing into
each directory to do a separate install?
&gt;
&gt; ---------------------------------------------------------------------
&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201611.mbox/raw/%3cCALhtWkdz7ZZJ3pD4ugOScTVskjA+mrxxaE-OLZOa7VU9FDYiuA@mail.gmail.com%3e/">Unnamed text/plain</a> (inline, Quoted Printable, 4482 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201611.mbox/raw/%3cCALhtWkdz7ZZJ3pD4ugOScTVskjA+mrxxaE-OLZOa7VU9FDYiuA@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
