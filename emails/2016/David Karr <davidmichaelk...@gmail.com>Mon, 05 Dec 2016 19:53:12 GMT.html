<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: Need to fully understand bad implications of combined aggregator and parent pom</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201612.mbox/%3c87f90a9d-c2a3-26e1-3595-5199f58d0ec2@florian-schaetz.de%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201612.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201612.mbox/%3cd2165522-c894-38e4-46f2-be411ad1b25c@schulte.it%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201612.mbox/%3cCAK8jvqx5jXre=NaP=4VNdE1evjVjXXrCA4ihE-WfYiM1=Xf99Q@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201612.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201612.mbox/%3ce3dc1e0d-510d-a55b-d419-6d52cf9c05d1@schulte.it%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201612.mbox/%3c87f90a9d-c2a3-26e1-3595-5199f58d0ec2@florian-schaetz.de%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201612.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201612.mbox/%3cd2165522-c894-38e4-46f2-be411ad1b25c@schulte.it%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201612.mbox/%3cCAK8jvqx5jXre=NaP=4VNdE1evjVjXXrCA4ihE-WfYiM1=Xf99Q@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201612.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201612.mbox/%3ce3dc1e0d-510d-a55b-d419-6d52cf9c05d1@schulte.it%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">David Karr &lt;davidmichaelk...@gmail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: Need to fully understand bad implications of combined aggregator and parent pom</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Mon, 05 Dec 2016 19:53:12 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
Why would there be plugin duplications?  Are you thinking there would
be plugin definitions in the aggregator pom?  The point of the
aggregator pom is that it defines the GAV of the artifact and has the
modules list and NOTHING else.

On Mon, Dec 5, 2016 at 11:27 AM, Mirko Friedenhagen
&lt;mfriedenhagen@gmail.com&gt; wrote:
&gt; Hello,
&gt;
&gt; I use the combined aggregator/parent pom as well. While multiple poms may
&gt; be cleaner because of separation of concerns, you might easily end in
&gt; duplications for e.g. plugin definitions, which is a shame as well.
&gt;
&gt; Regards
&gt; Mirko
&gt; --
&gt; Sent from my mobile
&gt;
&gt; Am 05.12.2016 10:56 schrieb "Sander Verhagen" &lt;sander@sanderverhagen.net&gt;:
&gt;
&gt;&gt; Simple and easy may be in the eye of the beholder. I get a lot of your
&gt;&gt; points (except for the cycles breaking your build, I'm not recognizing
&gt;&gt; that), but my environment is just dramatically different, and the things
&gt;&gt; that you are describing as necessary for your environment, would be
&gt;&gt; unneeded complexity for mine. We have a lot more entirely separate
&gt;&gt; projects, each of which with their own (smaller) constellation (ancestry)
&gt;&gt; of Maven projects. There's a company POM. Each project has a parent POM,
&gt;&gt; that inherits the company POM, and yes, it's an aggregator too. That's
&gt;&gt; never a problem, because the child projects are all unique and different,
&gt;&gt; and aside from a few shared plugin configurations, that we are perfectly
&gt;&gt; happy to have in the company POM, and a few enforcer rules that we are
&gt;&gt; happy to share across the entire project, all the real meat is in the leaf
&gt;&gt; node POM files. I donâ€™t know what JSP compilation you speak of, nor do we
&gt;&gt; have any significant WAR configuration to be shared across modules. I
&gt;&gt; currently have 716 POM files checked out locally (just a quick "find"),
&gt;&gt; just to give you some feeling that my application of Maven isn't just
&gt;&gt; trivial. But it is DIFFERENT than yours. And I like my shared
&gt;&gt; aggregator/parent POMs. Maybe if it hadn't been designed like this, by
&gt;&gt; Maven, for many years now as it is, whatever the world would look like
&gt;&gt; would've been fine too, but now I'm fond of this approach, to be honest :)
&gt;&gt;
&gt;&gt; One more note, I have learned to be sparse on what to put into the
&gt;&gt; inheritance hierarchy (composition over inheritance, that good stuff), so
&gt;&gt; our parent POMs are also a lot leaner than what I've seen (myself and
&gt;&gt; others do) in the past. Something like this may play into your observations
&gt;&gt; also.
&gt;&gt;
&gt;&gt; Thanks for everyone's perspective on this, it's interesting!
&gt;&gt;
&gt;&gt;
&gt;&gt; Sander Verhagen
&gt;&gt; [  sander@sanderverhagen.net  ]
&gt;&gt;
&gt;&gt; NOTICE: my e-mail address has changed. Please remove Verhagen@Sander.com
&gt;&gt; now and start using Sander@SanderVerhagen.net from now on. Please update
&gt;&gt; your address book. Thank you!
&gt;&gt;
&gt;&gt; -----Original Message-----
&gt;&gt; From: Hilco Wijbenga [mailto:hilco.wijbenga@gmail.com]
&gt;&gt; Sent: Sunday, December 4, 2016 17:16
&gt;&gt; To: Maven Users List &lt;users@maven.apache.org&gt;
&gt;&gt; Subject: Re: Need to fully understand bad implications of combined
&gt;&gt; aggregator and parent pom
&gt;&gt;
&gt;&gt; Indeed, combining the parent and aggregator concerns in one POM is not a
&gt;&gt; good idea. I would go so far as to call it an anti-pattern. A very common
&gt;&gt; one, unfortunately.
&gt;&gt;
&gt;&gt; First, you get a cycle per module. Cycles are never a good thing, though
&gt;&gt; sometimes they are unavoidable. Maven seems to be fine with this particular
&gt;&gt; type of cycle but you still get strange behaviour on occasion. A build may
&gt;&gt; break (especially when starting with an empty
&gt;&gt; repository) with a strange error message but a second attempt may succeed.
&gt;&gt; That's also (probably) why it is usually not recognised as a problem. If
&gt;&gt; the second build succeeds you tend to shrug your shoulders and move on.
&gt;&gt;
&gt;&gt; Let's say you have an enormous Java file of 10,000 lines of code. I don't
&gt;&gt; think anyone would consider that good design. Similarly, if you have a
&gt;&gt; single project with some 4,000 Java files. Again, I don't think anyone
&gt;&gt; would consider that an example of good design. In both cases, we would
&gt;&gt; argue that it needs to be broken up because, clearly, separate/independent
&gt;&gt; concerns have been conflated. And it is all just too hard to understand,
&gt;&gt; too hard to test, and too hard to maintain.
&gt;&gt;
&gt;&gt; So why would it be a good idea to put all POM related concerns in one
&gt;&gt; place? Especially when it comes to modules, they are *only* relevant at
&gt;&gt; compile time. There is absolutely no reason to know about this at any other
&gt;&gt; time. In fact, my aggregator POMs have a version "modules"
&gt;&gt; (that looks nice in the build output) that never changes and they all set
&gt;&gt; &lt;maven.deploy.skip&gt;.
&gt;&gt;
&gt;&gt; But it goes beyond that. If you have a JAR project and a WAR project then
&gt;&gt; it makes sense to have a separate parent-jar-pom and parent-war-pom. The
&gt;&gt; parent-jar-pom would only need to know about compiling Java code and
&gt;&gt; putting it in a JAR. Very simple. The parent-war-pom, however, would need
&gt;&gt; to know about JSP compilation
&gt;&gt; (e.g.) and how to run the WAR with Tomcat or Jetty. Perhaps the
&gt;&gt; parent-war-pom extends the parent-jar-pom but in any case there is no need
&gt;&gt; for this additional complexity to be in the parent-jar-pom.
&gt;&gt;
&gt;&gt; I think the core difference between these philosophies is choosing between
&gt;&gt; "easy" and "simple". It may be easy to put everything in one POM, but it
&gt;&gt; will cost you in maintenance effort. It takes more effort and thought to
&gt;&gt; simplify things and try and separate independent concerns into separate
&gt;&gt; POMs but your maintenance burden will be lighter. Why? Because if you
&gt;&gt; change something about the JSP compilation only your WAR projects will be
&gt;&gt; affected. Such cause and effect is easy to explain and understand: it's
&gt;&gt; simple. :-) Remember, we're not just going to have to explain this to our
&gt;&gt; colleagues but also (e.g.) our manager and the change control board.
&gt;&gt;
&gt;&gt; With a single parent-pom, naturally, you could simply not upgrade your JAR
&gt;&gt; project to the latest parent POM (the one with the JSP compilation
&gt;&gt; changes) but then you are forcing your maintenance developers to know the
&gt;&gt; difference between multiple versions of the parent POM. And this very
&gt;&gt; quickly becomes more than 2 and for more than 1 project. This is your
&gt;&gt; typical "throw it over the fence" approach. Having been on the other side
&gt;&gt; of that fence, I would consider that "not nice".
&gt;&gt;
&gt;&gt; On 2 December 2016 at 04:02, JoÃ£o Cabrita &lt;joao.r.cabrita@gmail.com&gt;
&gt;&gt; wrote:
&gt;&gt; &gt; My experience has been that combining parent and aggregator concerns
&gt;&gt; &gt; into the root module causes trouble for "aggregator-style" goals like
&gt;&gt; &gt; "javadoc-aggregate" that depend on artifacts generated by the submodules.
&gt;&gt; &gt;
&gt;&gt; &gt; The reason seems to be that, when using such goals, there is a cyclic
&gt;&gt; &gt; dependency: the parent/aggregator depends on its submodules for the
&gt;&gt; &gt; artifacts and the submodules depend on the parent/aggregator for it's
&gt;&gt; &gt; configuration.
&gt;&gt; &gt; This leads me to believe that filing this as a bug isn't entirely
&gt;&gt; correct.
&gt;&gt; &gt;
&gt;&gt; &gt; To be more specific, for a module A that is both parent and aggregator
&gt;&gt; &gt; of submodules B and C, the build order is A B C.
&gt;&gt; &gt; When A is just an aggregator and B, C and P are submodules of A, with
&gt;&gt; &gt; P being parent of B and C, the build order is P B C A.
&gt;&gt; &gt; Notice that the aggregator has moved from the start of the list
&gt;&gt; &gt; (because the children depend on it) to the end (because they no longer
&gt;&gt; do).
&gt;&gt; &gt;
&gt;&gt; &gt; JoÃ£o Cabrita
&gt;&gt; &gt;
&gt;&gt; &gt; On 1 December 2016 at 04:26, Curtis Rueden &lt;ctrueden@wisc.edu&gt; wrote:
&gt;&gt; &gt;
&gt;&gt; &gt;&gt; Hi David,
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; &gt; The fact is, when I ensured that both the local and intranet repo
&gt;&gt; &gt;&gt; &gt; is EMPTY of build artifacts, including the parent pom, the child
&gt;&gt; &gt;&gt; &gt; modules fail to build because they can't find the parent pom, which
&gt;&gt; &gt;&gt; &gt; just resides in the parent directory of each child module.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I have never had that problem with multi-module projects that use a
&gt;&gt; &gt;&gt; combined parent/aggregator in the top-level directory. This sounds
&gt;&gt; &gt;&gt; like a bug to me. Can you please create an SSCCE / MCVE? Then maybe
&gt;&gt; &gt;&gt; the community can comment further on what is going wrong for you.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Regards,
&gt;&gt; &gt;&gt; Curtis
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; --
&gt;&gt; &gt;&gt; Curtis Rueden
&gt;&gt; &gt;&gt; LOCI software architect - http://loci.wisc.edu/software
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; On Wed, Nov 30, 2016 at 7:59 PM, KARR, DAVID &lt;dk068x@att.com&gt; wrote:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; &gt; &gt; -----Original Message-----
&gt;&gt; &gt;&gt; &gt; &gt; From: Dan Tran [mailto:dantran@gmail.com]
&gt;&gt; &gt;&gt; &gt; &gt; Sent: Wednesday, November 30, 2016 5:10 PM
&gt;&gt; &gt;&gt; &gt; &gt; To: Maven Users List &lt;users@maven.apache.org&gt;
&gt;&gt; &gt;&gt; &gt; &gt; Subject: Re: Need to fully understand bad implications of
&gt;&gt; &gt;&gt; &gt; &gt; combined aggregator and parent pom
&gt;&gt; &gt;&gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; Correct we dont ever enter relativePath. The implicit one should
&gt;&gt; &gt;&gt; &gt; &gt; work and should never see warning that a module can't find its
&gt;&gt; &gt;&gt; &gt; &gt; parent
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Uh, whatever.  You're clearly disagreeing with me, so saying "correct"
&gt;&gt; &gt;&gt; &gt; just confuses things.
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; The fact is, when I ensured that both the local and intranet repo
&gt;&gt; &gt;&gt; &gt; is
&gt;&gt; &gt;&gt; EMPTY
&gt;&gt; &gt;&gt; &gt; of build artifacts, including the parent pom, the child modules
&gt;&gt; &gt;&gt; &gt; fail to build because they can't find the parent pom, which just
&gt;&gt; &gt;&gt; &gt; resides in the parent directory of each child module.
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; I never tried adding a "&lt;relativePath&gt;..&lt;/relativePath&gt;
to all of
&gt;&gt; &gt;&gt; &gt; the parent pom references, but I was able to get it to work by
&gt;&gt; &gt;&gt; &gt; splitting out the parent pom responsibilities into a separate child
&gt;&gt; &gt;&gt; &gt; module pom, and having all the references specify the relative path
&gt;&gt; to that.
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; On Wed, Nov 30, 2016 at 4:54 PM, KARR, DAVID &lt;dk068x@att.com&gt;
&gt;&gt; wrote:
&gt;&gt; &gt;&gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; -----Original Message-----
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; From: Dan Tran [mailto:dantran@gmail.com]
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; Sent: Wednesday, November 30, 2016 3:17 PM
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; To: Maven Users List &lt;users@maven.apache.org&gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; Subject: Re: Need to fully understand bad implications
of
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; combined aggregator and parent pom
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; I concur with Ben,  aggregator module is banned at my
work.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; Top level parent hosts all modules
&gt;&gt; &gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; So does this mean that you utilize "relativePath" in the
child
&gt;&gt; &gt;&gt; &gt; &gt; &gt; module's parent definitions?  Otherwise, the child modules
are
&gt;&gt; &gt;&gt; &gt; &gt; &gt; being built before the POM for the top-level POM is installed
&gt;&gt; &gt;&gt; &gt; &gt; &gt; (which
&gt;&gt; &gt;&gt; happens
&gt;&gt; &gt;&gt; &gt; &gt; &gt; at the end of the build).
&gt;&gt; &gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; On Wed, Nov 30, 2016 at 1:47 PM, KARR, DAVID &lt;dk068x@att.com&gt;
&gt;&gt; &gt;&gt; wrote:
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; -----Original Message-----
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; From: Stephen Connolly
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; [mailto:stephen.alan.connolly@gmail.com
&gt;&gt; &gt;&gt; ]
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; Sent: Wednesday, November 30, 2016 1:01 PM
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; To: Maven Users List &lt;users@maven.apache.org&gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; Subject: Re: Need to fully understand bad
implications of
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; combined aggregator and parent pom
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; You do have relativePath set correctly for
the separate
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; parent from aggregator?
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; Not sure whether you're addressing Benson or me,
but
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; setting relativePath is definitely a requirement,
and I
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; think the error message you get is pretty clear
when you
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; donâ€™t have it, so I imagine
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; that's not Benson's issue.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; In my case, I did some cut/pasting and some global
replaces
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; to separate the POM into parent and aggregator,
and now my
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; build works from the top with empty repositories.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; I don't use the site plugin.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; On Wed 30 Nov 2016 at 03:28, Benson Margulies
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &lt;bimargulies@gmail.com&gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; wrote:
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; My experience is precisely the opposite
of yours. The
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; most common practice is for the parent
to be the
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; aggregator; it's hard to get the site
plugin, for
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; example, to work right with your preferred
structure
&gt;&gt; where they are different.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I have built many projects with the the
one-parent
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; structure, and they typically have interdependencies
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; between the
&gt;&gt; &gt;&gt; modules,
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; and they work fine.  Can you boil this
down to a
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; failing case on github? Can you share
some poms?
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; On Tue, Nov 29, 2016 at 9:19 PM, KARR,
DAVID
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &lt;dk068x@att.com
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; wrote:
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; A while ago, I started working on
an existing project
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; with many
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; developers.  The codebase has a large
multi-project
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Maven
&gt;&gt; &gt;&gt; &gt; &gt; build.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; The top directory is both an "aggregator"
and "parent"
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; POM,
&gt;&gt; &gt;&gt; as
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; it has a
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; "modules"
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; list, and all of the child modules have
it as their
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; parent POM, for dependencies and plugins.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I've always believed this is a defective
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; architecture.  I believe that
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; the top-level directory should have an
"aggregator" POM
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; that just lists the modules to build,
and a
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; subdirectory of the top-level directory
should have a
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; project that just defines the parent
POM, which defines
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; dependencies and plugins for
&gt;&gt; &gt;&gt; &gt; &gt; subprojects to use.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Although I feel this is a "cleaner"
architecture,
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I've
&gt;&gt; &gt;&gt; never
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; been able
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; to cite specific problems with the other
approach,
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; besides
&gt;&gt; &gt;&gt; the
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; fact that module changes and dependency/plugin
changes
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; go in the same file, which is still a
"cleanliness"
&gt;&gt; argument.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Today I think I saw a real reason
why the present
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; architecture is a
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; problem, but I need to be certain the
problem I'm
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; seeing is caused by this, and that the
better
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; architecture fixes this problem, and
whether there is a
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; simple workaround in the
&gt;&gt; &gt;&gt; &gt; &gt; meantime.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I've been modifying the build to
use a completely new
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; intranet maven
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; repo and completely different groupids
for the build
&gt;&gt; &gt;&gt; &gt; &gt; artifacts.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I saw errors like this (with elisions):
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ----------------------- [INFO] Reactor
Summary:
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [INFO]
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [INFO] big-parent ..............................
&gt;&gt; &gt;&gt; ...........
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; FAILURE [
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 5.230 s]
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [INFO] some-other-module.............
&gt;&gt; &gt;&gt; ......................
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; SKIPPED [INFO]
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; another-module......................................
&gt;&gt; &gt;&gt; SKIPPED
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [INFO]
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ..............................
&gt;&gt; &gt;&gt; .......................SKIPPED
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [INFO]
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; -------------------------------------------------------
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; -----
&gt;&gt; &gt;&gt; --
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ----
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ----
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; --
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [INFO] BUILD FAILURE
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [INFO]
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; -------------------------------------------------------
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; -----
&gt;&gt; &gt;&gt; --
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ----
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ----
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; --
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [INFO] Total time: 8.063 s [INFO]
Finished at:
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 2016-11-29T16:23:36-08:00 [INFO]
Final
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; Memory:
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 41M/1093M [INFO]
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; -------------------------------------------------------
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; -----
&gt;&gt; &gt;&gt; --
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ----
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ----
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; --
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [ERROR] Failed to execute goal on
project
&gt;&gt; &gt;&gt; some-other-module:
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Could not
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; resolve dependencies for project
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; com.mycomp.detsusl:some-other-
&gt;&gt; module:bundle:2.0.0-SNAPSHOT:
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Could not find artifact
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; com.mycomp.detsusl:another-module:jar:2.0.0-SNAPSHOT
in
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; mycomp-public-group (
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; http://mavencentral.it.mycomp.com:8084/nexus/content/
&gt;&gt; &gt;&gt; repositor
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ies/
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; myco
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; mp-public-group/)
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; -&gt; [Help 1]
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; [ERROR]
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ---------------
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; The "big-parent" module is the top-level
directory
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; that is both the
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; aggregator and parent pom.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Conceptually, I think this is happening
because Maven
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; is trying to
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; evaluate dependencies before those dependencies
are built.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Again, I think the "separated" architecture
will
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; resolve
&gt;&gt; &gt;&gt; this,
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; but before I implement that, I need to
understand
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; exactly
&gt;&gt; &gt;&gt; what
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; is going on
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; here.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; In my local workspace, I got around
this by simply
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; "cd"ing to the
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; "another-module" directory and doing
a "mvn install",
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; then "cd"ing to "some-other-module",
doing the same,
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; and then
&gt;&gt; &gt;&gt; doing
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; the same again at the top level. The
reality was
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; messier than this, because I had quite
a few modules
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; that I had to build
&gt;&gt; &gt;&gt; &gt; &gt; manually this way.
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Assuming I'm right that separating
the "parent"
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; function from the
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; "aggregator" function would resolve this,
can someone
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; explain exactly what is happening here,
how my assumed
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; solution would resolve this, and whether
there's a
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; cleaner temporary workaround besides
"cd"ing into each
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; directory to do a
&gt;&gt; &gt;&gt; &gt; &gt; separate install?
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ------------------------------
&gt;&gt; &gt;&gt; ------------------------------
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ----
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ----
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; - To unsubscribe, e-mail: users-unsubscribe@maven.
&gt;&gt; &gt;&gt; apache.org
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; For additional commands, e-mail:
&gt;&gt; &gt;&gt; users-help@maven.apache.org
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; -------------------------------------------------------
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; -----
&gt;&gt; &gt;&gt; --
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; ----
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; --- To unsubscribe, e-mail: users-unsubscribe@maven.
&gt;&gt; &gt;&gt; apache.org
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; For additional commands, e-mail:
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; users-help@maven.apache.org
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; --
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; Sent from my phone
&gt;&gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt; &gt; &gt; ------------------------------------------------------------
&gt;&gt; &gt;&gt; ---------
&gt;&gt; &gt;&gt; &gt; &gt; &gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt;&gt; &gt;&gt; &gt; &gt; &gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;&gt; &gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt;
&gt;&gt;
&gt;&gt; ---------------------------------------------------------------------
&gt;&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt;&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;&gt;
&gt;&gt;
&gt;&gt; ---------------------------------------------------------------------
&gt;&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt;&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;&gt;

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201612.mbox/raw/%3cCAA5t8VqFqsqbS_fJapr_FBRzKu7cYEO=Esk+O5X6xV7MAxuhxw@mail.gmail.com%3e/">Unnamed text/plain</a> (inline, Quoted Printable, 20545 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201612.mbox/raw/%3cCAA5t8VqFqsqbS_fJapr_FBRzKu7cYEO=Esk+O5X6xV7MAxuhxw@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
