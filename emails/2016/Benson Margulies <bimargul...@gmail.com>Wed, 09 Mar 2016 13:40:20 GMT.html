<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: variable doesn't work for version</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201603.mbox/%3cCA+nPnMztK1h_UN10u+n=kfg9G_3y=hWOdPS6Ppu2OCL9FafTkQ@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201603.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201603.mbox/%3cCA+nPnMxPtQUF=8N9Crwarb_pnP1XgKVXj4SFoNXksjVfd_vDfw@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201603.mbox/%3cCACZkXPxLRhZa0a9y4w_ZqJdKARL8RBJLhcyZp4HwYBH9Exi-qw@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201603.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201603.mbox/%3cCA+nPnMxPtQUF=8N9Crwarb_pnP1XgKVXj4SFoNXksjVfd_vDfw@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201603.mbox/%3cCA+nPnMztK1h_UN10u+n=kfg9G_3y=hWOdPS6Ppu2OCL9FafTkQ@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201603.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201603.mbox/%3cCA+nPnMxPtQUF=8N9Crwarb_pnP1XgKVXj4SFoNXksjVfd_vDfw@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201603.mbox/%3cCACZkXPxLRhZa0a9y4w_ZqJdKARL8RBJLhcyZp4HwYBH9Exi-qw@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201603.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201603.mbox/%3cCA+nPnMxPtQUF=8N9Crwarb_pnP1XgKVXj4SFoNXksjVfd_vDfw@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Benson Margulies &lt;bimargul...@gmail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: variable doesn't work for version</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Wed, 09 Mar 2016 13:40:20 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
On Tue, Mar 8, 2016 at 2:28 PM, Stephen Connolly
&lt;stephen.alan.connolly@gmail.com&gt; wrote:
&gt; In the .mvn folder put an extension that contributes the ${rev} property
&gt; based on whatever you seem safe

Stephen, can you please offer some details? Just what sort of
extension? An event spy that sees session start? Something else? Does
this require 3.3.x  or does it work with 3.2.5?

&gt;
&gt; Then just have the project version include the ${rev} at the appropriate
&gt; place
&gt;
&gt; On Tuesday 8 March 2016, Gary Gregory &lt;garydgregory@gmail.com&gt; wrote:
&gt;
&gt;&gt; On Mon, Mar 7, 2016 at 6:53 PM, Eric B &lt;ebenzacar@gmail.com &lt;javascript:;&gt;&gt;
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt; &gt; The first question I have to ask is what you are trying to accomplish
&gt;&gt; with
&gt;&gt; &gt; your continuous-delivery?
&gt;&gt;
&gt;&gt;
&gt;&gt; We have a Maven multi-module build which has thousands of unit tests. We
&gt;&gt; use Bamboo for CI and if we get a green build that means that all the tests
&gt;&gt; pass of course and that we successfully deployed the build to our repo (we
&gt;&gt; use Artifactory). We use the Maven's deploy to deploy, not the release
&gt;&gt; plugin.
&gt;&gt;
&gt;&gt; At this point anyone can use the built product out of Bamboo's saved
&gt;&gt; artifacts or Artifactory: our internal/external consultants, sales
&gt;&gt; engineers, formal QA, other downstream, products, and so on. It's up to the
&gt;&gt; PO to decide when to slap a new major or minor version label and he/she can
&gt;&gt; do at anytime.
&gt;&gt;
&gt;&gt; From development's POV, a green build is a released product, with a version
&gt;&gt; for example 3.1.201601070101 (3.1.YYYYMMDDHHMM). We used to have the SVN
&gt;&gt; version number as the maintenance version part but we are switching to Git
&gt;&gt; soon, hence the move to timestamps.
&gt;&gt;
&gt;&gt; Our parent POM contains what is considered a Maven "hack":
&gt;&gt;
&gt;&gt;   &lt;properties&gt;
&gt;&gt;
&gt;&gt; &lt;maven.build.timestamp.format&gt;yyyyMMddHHmm&lt;/maven.build.timestamp.format&gt;
&gt;&gt;     &lt;version.major&gt;3&lt;/version.major&gt;
&gt;&gt;     &lt;version.minor&gt;1&lt;/version.minor&gt;
&gt;&gt;     &lt;version.main&gt;${version.major}.${version.minor}&lt;/version.main&gt;
&gt;&gt;     &lt;revision&gt;${maven.build.timestamp}&lt;/revision&gt;
&gt;&gt;     &lt;dv.version&gt;${version.main}.${revision}&lt;/dv.version&gt;
&gt;&gt;
&gt;&gt; Each module then has:
&gt;&gt;
&gt;&gt; &lt;version&gt;${dv.version}&lt;/version&gt;
&gt;&gt;
&gt;&gt; What is the Maven way to achieve this goal?
&gt;&gt;
&gt;&gt; Gary
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; &gt; Are you trying to put snapshot versions into a
&gt;&gt; &gt; production/release state?
&gt;&gt; &gt;
&gt;&gt; &gt; The biggest issue I have noticed with teams is the misunderstanding of
&gt;&gt; how
&gt;&gt; &gt; SNAPSHOTs work, or their purpose in the development process.  Either
&gt;&gt; teams
&gt;&gt; &gt; want to release applications in SNAPSHOT mode, or release code that is
&gt;&gt; &gt; essentially in SNAPSHOT (ie: development) mode, but with fixed version
&gt;&gt; &gt; numbers.  But instead of changing version numbers, they use something
&gt;&gt; like
&gt;&gt; &gt; a timestamp to increment version numbers automatically.  But at the end
&gt;&gt; of
&gt;&gt; &gt; it all, it kind of contravenes maven's versioning concept.
&gt;&gt; &gt;
&gt;&gt; &gt; Normally, if your artifact is a work in progress, you should just be
&gt;&gt; using
&gt;&gt; &gt; a SNAPSHOT.  If you are looking to make a real release, then you should
&gt;&gt; be
&gt;&gt; &gt; promoting your code from a SNAPSHOT to a fixed version.  Generally, the
&gt;&gt; &gt; concept of continuous-delivery should only apply when in a SNAPSHOT mode,
&gt;&gt; &gt; since anything else isn't changing (ie: a fixed release doesn't need to
&gt;&gt; be
&gt;&gt; &gt; re-delivered).
&gt;&gt; &gt;
&gt;&gt; &gt; So then that begs the question why you need to constantly change your
&gt;&gt; &gt; version numbers during your development phase?
&gt;&gt; &gt;
&gt;&gt; &gt; And if the goal is truly to have fixed versions for some other team to
&gt;&gt; have
&gt;&gt; &gt; access to a "stable" version of your artifact (ie: they can be guaranteed
&gt;&gt; &gt; that it isn't going to change as you continue to develop), you could
&gt;&gt; always
&gt;&gt; &gt; use something like the maven-release-plugin to promote from SNAPSHOT to a
&gt;&gt; &gt; fixed version, and then re-open the next version as a SNAPSHOT.
&gt;&gt; (Although
&gt;&gt; &gt; I know there are many dissenters against the release-plugin).
&gt;&gt; &gt;
&gt;&gt; &gt; Thanks,
&gt;&gt; &gt;
&gt;&gt; &gt; Eric
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; On Mon, Mar 7, 2016 at 7:15 PM, Gary Gregory &lt;garydgregory@gmail.com
&gt;&gt; &lt;javascript:;&gt;&gt;
&gt;&gt; &gt; wrote:
&gt;&gt; &gt;
&gt;&gt; &gt; &gt; Is there a Maven-way to do continuous delivery then? As opposed
&gt;&gt; &gt; &gt; to continuous integration.
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; Our current hack is to use the date as the maintenance version as a
&gt;&gt; &gt; &gt; variable for example 3.1.20160102
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; G
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; On Mon, Mar 7, 2016 at 11:18 AM, Eric B &lt;ebenzacar@gmail.com
&gt;&gt; &lt;javascript:;&gt;&gt; wrote:
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; I personally have a pet-peeve of using system variables to define
&gt;&gt; &gt; version
&gt;&gt; &gt; &gt; &gt; numbers; I find it is counter productive to the building of maven
&gt;&gt; &gt; &gt; &gt; artifacts.  There is no traceability to determine  the actual version
&gt;&gt; &gt; of
&gt;&gt; &gt; &gt; an
&gt;&gt; &gt; &gt; &gt; artifact once it has been built.  At least having a fixed version
&gt;&gt; &gt; number
&gt;&gt; &gt; &gt; in
&gt;&gt; &gt; &gt; &gt; the &lt;version&gt; element shows up in the META-INF/maven/../pom.*
files.
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; Is using a variable for the version even a good idea?
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; Thanks,
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; Eric
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; On Mon, Mar 7, 2016 at 4:04 AM, Stephen Connolly &lt;
&gt;&gt; &gt; &gt; &gt; stephen.alan.connolly@gmail.com &lt;javascript:;&gt;&gt; wrote:
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt; only specific properties are permitted for expansion in XPath
paths
&gt;&gt; &gt; &gt; that
&gt;&gt; &gt; &gt; &gt; &gt; match the following regex
&gt;&gt; &gt; &gt; /project/(parent/)?(groupId|artifactId|version)
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt; On 2 March 2016 at 05:39, Raghu &lt;raghunath_ku@yahoo.com.invalid&gt;
&gt;&gt; &gt; &gt; wrote:
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt; &gt; I have a POM with parent node as below: &lt;parent&gt;
&gt;&gt; &gt; &gt; &gt; &gt; &gt; &lt;groupId&gt;com.test&lt;/groupId&gt; &lt;artifactId&gt;pom.parent&lt;/artifactId&gt;
&gt;&gt; &gt; &gt; &gt; &gt; &gt; &lt;version&gt;${test.version}&lt;/version&gt;
&gt;&gt; &gt; &gt; &gt; &gt; &gt; &lt;relativePath&gt;../scripts/pom.xml&lt;/relativePath&gt;
&lt;/parent&gt;
&gt;&gt; &gt; &gt; &gt; &gt; &gt; This used to work till maven 3.3.3 version - mvn clean install.
&gt;&gt; &gt; &gt; &gt; However,
&gt;&gt; &gt; &gt; &gt; &gt; &gt; the version 3.3.9 throws error though. When I change the
version
&gt;&gt; &gt; to a
&gt;&gt; &gt; &gt; &gt; &gt; value
&gt;&gt; &gt; &gt; &gt; &gt; &gt; instead of the variable, it works fine.
&gt;&gt; &gt; &gt; &gt; &gt; &gt; Won't maven support variable for version? Or is it a bug
with
&gt;&gt; &gt; 3.3.9?
&gt;&gt; &gt; &gt; &gt; &gt; &gt; Appreciate your response...
&gt;&gt; &gt; &gt; &gt; &gt; &gt; - regards,raghu
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; --
&gt;&gt; &gt; &gt; E-Mail: garydgregory@gmail.com &lt;javascript:;&gt; | ggregory@apache.org
&gt;&gt; &lt;javascript:;&gt;
&gt;&gt; &gt; &gt; Java Persistence with Hibernate, Second Edition
&gt;&gt; &gt; &gt; &lt;http://www.manning.com/bauer3/&gt;
&gt;&gt; &gt; &gt; JUnit in Action, Second Edition &lt;http://www.manning.com/tahchiev/&gt;
&gt;&gt; &gt; &gt; Spring Batch in Action &lt;http://www.manning.com/templier/&gt;
&gt;&gt; &gt; &gt; Blog: http://garygregory.wordpress.com
&gt;&gt; &gt; &gt; Home: http://garygregory.com/
&gt;&gt; &gt; &gt; Tweet! http://twitter.com/GaryGregory
&gt;&gt; &gt; &gt;
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; E-Mail: garydgregory@gmail.com &lt;javascript:;&gt; | ggregory@apache.org
&gt;&gt; &lt;javascript:;&gt;
&gt;&gt; Java Persistence with Hibernate, Second Edition
&gt;&gt; &lt;http://www.manning.com/bauer3/&gt;
&gt;&gt; JUnit in Action, Second Edition &lt;http://www.manning.com/tahchiev/&gt;
&gt;&gt; Spring Batch in Action &lt;http://www.manning.com/templier/&gt;
&gt;&gt; Blog: http://garygregory.wordpress.com
&gt;&gt; Home: http://garygregory.com/
&gt;&gt; Tweet! http://twitter.com/GaryGregory
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Sent from my phone

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201603.mbox/raw/%3cCALhtWkceHu5RBNPDKK2+N=m3uJxpOLL9Vs+c+S0P297K9_6BCg@mail.gmail.com%3e/">Unnamed text/plain</a> (inline, None, 7274 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201603.mbox/raw/%3cCALhtWkceHu5RBNPDKK2+N=m3uJxpOLL9Vs+c+S0P297K9_6BCg@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
