<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: Maven/Nexus metadata interaction question</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201208.mbox/%3cCAA8BW8GmkAhfmr6Xs3sjZHtVr_1OV2tZ9ypapOMa2JcjptzNOw@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201208.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201208.mbox/%3cCAMk_Bejpr5kded_vu6gRa63m-CQ5W_Zsr=M75dqx+ckZcA=GCA@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201208.mbox/%3cCAA8BW8GmkAhfmr6Xs3sjZHtVr_1OV2tZ9ypapOMa2JcjptzNOw@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201208.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201208.mbox/%3cCAHNdxu=YQcvGrg3RAXG7OjmD-eGA3yyZMJimz16AN7kO37pFAg@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201208.mbox/%3cCAA8BW8GmkAhfmr6Xs3sjZHtVr_1OV2tZ9ypapOMa2JcjptzNOw@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201208.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201208.mbox/%3cCAMk_Bejpr5kded_vu6gRa63m-CQ5W_Zsr=M75dqx+ckZcA=GCA@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201208.mbox/%3cCAA8BW8GmkAhfmr6Xs3sjZHtVr_1OV2tZ9ypapOMa2JcjptzNOw@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201208.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201208.mbox/%3cCAHNdxu=YQcvGrg3RAXG7OjmD-eGA3yyZMJimz16AN7kO37pFAg@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Brian Fox &lt;bri...@infinity.nu&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: Maven/Nexus metadata interaction question</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Fri, 24 Aug 2012 21:48:07 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
On Fri, Aug 24, 2012 at 5:27 PM, Laird Nelson &lt;ljnelson@gmail.com&gt; wrote:
&gt; On Fri, Aug 24, 2012 at 1:52 PM, David Hoffer &lt;dhoffer6@gmail.com&gt; wrote:
&gt;
&gt;&gt; We have been having nothing but trouble with Nexus and
&gt;&gt; Maven3 with the time-stamped snapshots and all the various metadata
&gt;&gt; files that Nexus spits out (which confuse Maven and IDEs).
&gt;

Let me fill in a few details that aren't quite right in this thread:

Maven produces the maven-metadata.xml files, not Nexus. Nexus is able
to repair them if needed (or if they are missing from another build)
but otherwise the file is untouched. You can repair them by right
clicking the folder in the repository view and selecting repair
metadata.

&gt;
&gt; Oh, so this whole thing is a Nexus problem?  Is that why none of my
&gt; maven-metadata.xml files in my SNAPSHOT directories in my Nexus repository
&gt; feature a &lt;latest&gt; tag

The LATEST tag is completely unrelated to the SNAPSHOT to
timestamp-buildnumber conversion that Maven does. LATEST and RELEASE
are key words that can be used in place of a version in your pom, but
these have been anti-patterns for a long time. When Maven wants to
find the timestamped file, it reads the maven-metadata.xml and looks
for the &lt;timestamp&gt; and &lt;buildnumber&gt; tags:

&lt;versioning&gt;
&lt;snapshot&gt;
&lt;timestamp&gt;20120809.231215&lt;/timestamp&gt;
&lt;buildNumber&gt;116&lt;/buildNumber&gt;


Latest itself is again generated by Maven, but isn't required for
snapshot resolution.

(mind you, I'm guessing in the dark here about what
&gt; this tag is for, and also guessing that it is used in resolving SNAPSHOTs)?
&gt;  Am I wrong in thinking that these files *should* feature such a tag if
&gt; they are to be useful at all?  Where would I go to learn more information
&gt; about this?
&gt;
&gt; It certainly seems to be the case from others I've talked to that the
&gt; "solution" is "redeploy another SNAPSHOT; that's the only way to get rid of
&gt; this, and we don't know why it happens either".  Surely that can't be the
&gt; case.  Surely there's some way to convince Maven to figure out what the
&gt; latest SNAPSHOT is in a directory?  Or to otherwise help it correct its
&gt; mistaken belief that there are *no* *possible* snapshot resolutions?  Is
&gt; this a rare problem?



A few more things could help narrow this down:
If you read the maven-metadata.xml from the repository, what's in it?
I'm presuming you have the snapshot repository included in a group
repo, which is what Maven is actually reading. When you fetch from
that url, what's in it?

Checking each of those urls would eliminate any negative caching
effects that Nexus might be doing. It would also confirm that the
group repo is configured properly

If those urls both show the correct data as you pasted in the original
post, then check and see what's in your local repo for that location.
It's possible that Maven isn't actually requesting the file from Nexus
and is instead resolving something incorrectly from the local repo.


&gt;
&gt; Thanks for the input, David.
&gt;
&gt; Thanks,
&gt; Laird
&gt;
&gt; --
&gt; http://about.me/lairdnelson

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201208.mbox/raw/%3cCAMk_BejCh7GBA76-zwXFyk72Awq7P9_TyZzs9WMU+YV+1Fz7MQ@mail.gmail.com%3e/">Unnamed text/plain</a> (inline, None, 3211 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201208.mbox/raw/%3cCAMk_BejCh7GBA76-zwXFyk72Awq7P9_TyZzs9WMU+YV+1Fz7MQ@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
