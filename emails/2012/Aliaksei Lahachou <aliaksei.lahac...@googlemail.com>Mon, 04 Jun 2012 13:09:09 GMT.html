<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Imported dependency management does not override version and scope defined in parent POM.</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201206.mbox/%3cCA+nPnMxNpWfy6WwbYL+cTLOOz3s3y-UJourMrqNkRfgnd7HLWA@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201206.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201206.mbox/%3cCAJHJdS_x=LYviUv0yZ+60839X2_JUk3-ZtOSCmN88v++FO0jtg@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201206.mbox/%3c3F15A26D2A733A498AC844AAFD7C1A7D04ED5F1E@PTXSMSXM01.emea.ime.reuters.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201206.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201206.mbox/%3c20120604134820.61090@gmx.net%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201206.mbox/%3cCA+nPnMxNpWfy6WwbYL+cTLOOz3s3y-UJourMrqNkRfgnd7HLWA@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201206.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201206.mbox/%3cCAJHJdS_x=LYviUv0yZ+60839X2_JUk3-ZtOSCmN88v++FO0jtg@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201206.mbox/%3c3F15A26D2A733A498AC844AAFD7C1A7D04ED5F1E@PTXSMSXM01.emea.ime.reuters.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201206.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201206.mbox/%3c20120604134820.61090@gmx.net%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Aliaksei Lahachou &lt;aliaksei.lahac...@googlemail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Imported dependency management does not override version and scope defined in parent POM.</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Mon, 04 Jun 2012 13:09:09 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
Hello world!

I encountered an interesting pecularity today. I don't know whether this is
a feature or a bug, intended or not, known or unknown.

Imagine that there are 3 modules:

* Parent - defines version numbers in dependencyManagement and common
plugin configuration in pluginManagement.
* WAR - does not have any versions in dependencies, because versions are
managed in parent.
* Platform - defines platform-specific versions and scopes in
dependencyManagement. For example, JBoss AS 4 is distributed with Javassist
3.8.0 and there can be some problems, when Javassist is contained in WAR.
There are multiple platform modules, but only one is imported at a time.

Parent POM manages the following dependency:

&lt;dependencyManagement&gt;
  &lt;dependendencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;commons-codec&lt;/groupId&gt;
      &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;
      &lt;version&gt;1.6&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

Platform POM manages the same dependency:

&lt;dependencyManagement&gt;
  &lt;dependendencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;commons-codec&lt;/groupId&gt;
      &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;
      &lt;version&gt;1.3&lt;/version&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

WAR POM uses the dependency and imports the Platform POM:

&lt;dependencyManagement&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;...&lt;/groupId&gt;
        &lt;artifactId&gt;platform&lt;/artifactId&gt;
        &lt;version&gt;...&lt;/version&gt;
        &lt;type&gt;pom&lt;/type&gt;
        &lt;scope&gt;import&lt;/scope&gt;
  &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
&lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;commons-codec&lt;/groupId&gt;
      &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

What I see is that commons-codec:commons-codec:1.6 is included in final
package. It does not happen if I redefine version and scope directly in WAR
POM:

&lt;dependencyManagement&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;commons-codec&lt;/groupId&gt;
      &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;
      &lt;version&gt;1.3&lt;/version&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
  &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
&lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;commons-codec&lt;/groupId&gt;
      &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

Versions and scopes from imported Platform POM have effect only if the same
dependency is not defined in Parent. This is kind of unexpected for me,
because documentation states that importing a POM will incorporate all it's
dependencies in importer POM and the result is the same as if dependencies
were defined in the imported POM.

Can someone confirm whether this is a bug or a feature, or whether I do
something wrong. BTW, I use Maven 3.0.3, and the actual project I'm working
on is somewhat more complex.


Regards

</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li>Unnamed multipart/alternative (inline, None, 0 bytes)</li>
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201206.mbox/raw/%3cCALcFPWGEyL_=VNEaOp=x45KVGK01WkRVeKkPMent6UY13ESU_A@mail.gmail.com%3e/1">Unnamed text/plain</a> (inline, None, 2795 bytes)</li>
</ul>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201206.mbox/raw/%3cCALcFPWGEyL_=VNEaOp=x45KVGK01WkRVeKkPMent6UY13ESU_A@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
