<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: How to optimize maven dependencies to get better performance?</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201210.mbox/%3c50766223.5020603@artifact-software.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201210.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201210.mbox/%3c255343FA5EEE4D4599D4588EE379349B23A6E873@RHV-EXRDA-S21.corp.ebay.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201210.mbox/%3c50766223.5020603@artifact-software.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201210.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201210.mbox/%3c255343FA5EEE4D4599D4588EE379349B23A6E873@RHV-EXRDA-S21.corp.ebay.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201210.mbox/%3c50766223.5020603@artifact-software.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201210.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201210.mbox/%3c255343FA5EEE4D4599D4588EE379349B23A6E873@RHV-EXRDA-S21.corp.ebay.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201210.mbox/%3c50766223.5020603@artifact-software.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201210.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201210.mbox/%3c255343FA5EEE4D4599D4588EE379349B23A6E873@RHV-EXRDA-S21.corp.ebay.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Anders Hammar &lt;and...@hammar.net&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: How to optimize maven dependencies to get better performance?</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Thu, 11 Oct 2012 06:26:06 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
I recall there was an issue with some Aether version and large
dependency trees. This had an impact on one (or maybe several) of the
Maven 3.0.x versions. But if you're using the latest (3.0.4) it has
been fixed. Are you?

/Anders

On Thu, Oct 11, 2012 at 8:07 AM, Ron Wheeler
&lt;rwheeler@artifact-software.com&gt; wrote:
&gt; On 11/10/2012 1:40 AM, Wang, Simon wrote:
&gt;&gt; Hi, Barrie,
&gt;&gt;    That's really helpful!
&gt;&gt;
&gt;&gt;    Even I have local cache, it also takes about 2 mins to resolve dependencies.
&gt; What is it doing during this time. Run maven with a detailed log to see
&gt; each step.
&gt;
&gt; You might want to break your project up into modules that are smaller
&gt; and have fewer dependencies in each one.
&gt;
&gt;&gt;    Also it seems maven still will talk with remote maven server even I have local
cache.
&gt; It will talk to your Nexus and you need to make sure that your POMs or
&gt; settings.xml do not refer to any other Maven Repo besides your Nexus.
&gt;&gt;    Yes, maybe it's caused by unspecified version numbers for dependencies.
&gt;&gt;
&gt; Specify your versions on all dependencies
&gt;&gt;    I'll try maven-enforcer-plugin.
&gt; Not sure how this will help with performance.
&gt;&gt;
&gt;&gt;    We're using nexus now, haven't tried MRM, I'll host it and compare it to nexus.
&gt; Nexus is an MRM.
&gt;&gt;
&gt;&gt;    And I saw aether(major in dependency resolving) will take longer time to resolve
conflict dependencies.
&gt;&gt;    Is it also a point that need to be improved?
&gt;&gt;    Do you know is there any maven plugin to identify conflict dependencies?
&gt;
&gt; The Eclipse IDE will do this with the m2 Eclipse plug-in. We use STS
&gt; which is Eclipse fully loaded with everything that you need to use Maven.
&gt;
&gt; This is not likely going to cause a big performance hit.
&gt;&gt; Regards
&gt;&gt; Simon
&gt;&gt;
&gt;&gt; -----Original Message-----
&gt;&gt; From: Barrie Treloar [mailto:baerrach@gmail.com]
&gt;&gt; Sent: 2012年10月11日 11:48
&gt;&gt; To: Maven Users List
&gt;&gt; Subject: Re: How to optimize maven dependencies to get better performance?
&gt;&gt;
&gt;&gt; On Thu, Oct 11, 2012 at 1:46 PM, Wang, Simon &lt;Yunfeng.Wang@ebay.com&gt; wrote:
&gt;&gt;&gt; Hi,
&gt;&gt;&gt;    We're in trouble of terrible performance on resolve maven dependencies.
&gt;&gt;&gt; I did some search about it. Basically below ways should be helpful:
&gt;&gt;&gt;
&gt;&gt;&gt; 1. optimize nexus server to improve response time.
&gt;&gt;&gt; 2. optimize maven dependencies.
&gt;&gt;&gt;   1) avoid duplicated dependencies
&gt;&gt;&gt;   2) avoid dependency conflict cases
&gt;&gt;&gt;   3)....
&gt;&gt;&gt;
&gt;&gt;&gt; Any others suggestions?
&gt;&gt; What specifically is your problem?
&gt;&gt;
&gt;&gt; I can only guess at what you mean.
&gt;&gt; I'm assuming that when you run "mvn install" that maven is reaching out to check
for new dependencies which can be time consuming, especially with an empty ~/.m2/repository
local cache.
&gt;&gt; After the first install this shouldn't be a problem.
&gt;&gt;
&gt;&gt; Firstly make sure that you do not define additional "repository" in either your settings.xml
or pom.xml.
&gt;&gt; Every dependency will be checked against all repositories defined.
&gt;&gt; So just by defining one extra repository will double the time it takes to check dependencies.
&gt;&gt; There is no logic in Maven to blacklist/whitelist what artifacts are located where,
this is one reason why you use a Repository Manager.
&gt;&gt; You can see that if you declare repositories in your pom.xml and this is published
how it will affect everyone that includes your artifacts.
&gt;&gt; Please don't do that.
&gt;&gt;
&gt;&gt; Secondly, make sure you lock down all version numbers of dependencies.
&gt;&gt; It is bad practice to not specify these as it makes your build non-reproducable.
&gt;&gt; This could also be a reason why it is slow as Maven will need to check periodically
to see if new versions are available.
&gt;&gt; You can use maven enforcer
&gt;&gt; (http://maven.apache.org/plugins/maven-enforcer-plugin/) to ensure that you have
no unversioned artifacts.
&gt;&gt;
&gt;&gt; Thirdly, install a Maven Repository Manager (Nexus is one).
&gt;&gt; This will act as a local proxy and make downloading times much faster.
&gt;&gt; It also provides an aggregation point, so that there is only one repository to check
each artifact for and the Repository Manager will hide checking the other repos MRMs also
allow you to do whitelist/blacklist stuff to improve performance.
&gt;&gt; If you are in a corporate environment you really want an MRM installed.
&gt;&gt;
&gt;&gt; ---------------------------------------------------------------------
&gt;&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt;&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;&gt;
&gt;&gt;
&gt;&gt; ---------------------------------------------------------------------
&gt;&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt;&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;
&gt;
&gt; --
&gt; Ron Wheeler
&gt; President
&gt; Artifact Software Inc
&gt; email: rwheeler@artifact-software.com
&gt; skype: ronaldmwheeler
&gt; phone: 866-970-2435, ext 102
&gt;
&gt;
&gt; ---------------------------------------------------------------------
&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201210.mbox/raw/%3cCAKDUN1tdQjSSOAgQYi+ZwHts4Ku6pzPoRtjNGHMpZvbHqKNqkA@mail.gmail.com%3e/">Unnamed text/plain</a> (inline, Quoted Printable, 5219 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201210.mbox/raw/%3cCAKDUN1tdQjSSOAgQYi+ZwHts4Ku6pzPoRtjNGHMpZvbHqKNqkA@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
