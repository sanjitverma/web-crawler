<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: Maven concurrent builds</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201203.mbox/%3c4F57160D.2050104@gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201203.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201203.mbox/%3cCAO+CkK7PkN=LdfBkxayxZjHKOV2RbEUpDSRJfzyEL=yHXLoXNQ@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201203.mbox/%3c4F57160D.2050104@gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201203.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201203.mbox/%3cCAHhx-GJjvbzzUFLAmYUEyUbxZ0xKHhEqfL24pLLZ871Dy5tMSA@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201203.mbox/%3c4F57160D.2050104@gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201203.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201203.mbox/%3cCAO+CkK7PkN=LdfBkxayxZjHKOV2RbEUpDSRJfzyEL=yHXLoXNQ@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201203.mbox/%3c4F57160D.2050104@gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201203.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201203.mbox/%3cCAHhx-GJjvbzzUFLAmYUEyUbxZ0xKHhEqfL24pLLZ871Dy5tMSA@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">JÃ¶rg Schaible &lt;Joerg.Schai...@scalaris.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: Maven concurrent builds</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Wed, 07 Mar 2012 08:29:41 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
Hi Guillaume,

Guillaume Polet wrote:

&gt; Dear all,
&gt; 
&gt; I was having some doubts regarding Maven's ability to handle properly
&gt; concurrent builds. Lately, I had several builds of our project that
&gt; failed and it seemed that it was due to interferences between concurrent
&gt; builds of the same version of the same project.
&gt; 
&gt; I have a jenkins server which have 6 different builds:
&gt; * 1 for continuous build (which runs tests but does not deploy the
&gt; artifacts)
&gt; * 1 for nightly build
&gt; * 1 for releases (or almost release, ie, the pom is still in SNAPSHOT
&gt; version but could become a release)
&gt; All this is multiplied by two, because I have two versions (on 2
&gt; different branches).
&gt; 
&gt; So I had 2 questions:
&gt; 1. Can/Does Maven support concurrent builds of the same version of the
&gt; same project?

Not out of the box. Since by default both builds will use the same local 
repository creating the same artifacts at same time, the artifacts in the 
repository are likely to be corrupted.

&gt; If yes, do I need to do something to achieve this?

Use separate local repositories, it can be defined using separate 
settings.xml files or by call with a system property. Actually I don't know 
if Jenkins already supports something like this, because it's a general 
problem, see below.

&gt; If not,
&gt; is it something that Maven developers are considering?

It's not the first time this problem has been risen.

&gt; 2. Can/Does Maven support concurrent builds of different versions of the
&gt; same project?

They may still corrupt the metadata.xml files, but it is less likely and has 
AFAICS less consequences.

However, every concurrent build may corrupt a shared local repository, 
because both builds may download the same artifacts at same time. A scenario 
where this might happen is when you upgrade versions (e.g. of plugins) in a 
common master-pom and start two parallel builds then. Actually I am not sure 
if you're safe when running one Maven build in parallel mode. A repository 
manager like Nexus might prevent this scenario by detecting the same 
request, but again I am not sure if it does.

BTW: This is also the reason why you should never share a local repository 
with a network mount by multiple users.


&gt; 
&gt; Cheers,
&gt; Guillaume



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201203.mbox/raw/%3cjj769m$m6e$1@dough.gmane.org%3e/">Unnamed text/plain</a> (inline, 7-Bit, 2439 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201203.mbox/raw/%3cjj769m$m6e$1@dough.gmane.org%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
