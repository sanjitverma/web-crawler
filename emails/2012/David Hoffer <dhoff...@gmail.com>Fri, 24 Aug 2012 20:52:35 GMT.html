<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: Maven/Nexus metadata interaction question</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201208.mbox/%3cCAHNdxu=nbgAjiw1_wiqdnhdeQw7O8-69ki23pZNJsCcGZTLSvg@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201208.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201208.mbox/%3cB8D164BED956C5439875951895CB4B220EED50A7@WABOTH9MSGUSR8C.ITServices.sbc.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201208.mbox/%3cCAHNdxu=nbgAjiw1_wiqdnhdeQw7O8-69ki23pZNJsCcGZTLSvg@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201208.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201208.mbox/%3cCAHNdxukrb_YQYLst20zHU=e1bjDan+upKPLE9LF_mEVkTUBExQ@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201208.mbox/%3cCAHNdxu=nbgAjiw1_wiqdnhdeQw7O8-69ki23pZNJsCcGZTLSvg@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201208.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201208.mbox/%3cB8D164BED956C5439875951895CB4B220EED50A7@WABOTH9MSGUSR8C.ITServices.sbc.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201208.mbox/%3cCAHNdxu=nbgAjiw1_wiqdnhdeQw7O8-69ki23pZNJsCcGZTLSvg@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201208.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201208.mbox/%3cCAHNdxukrb_YQYLst20zHU=e1bjDan+upKPLE9LF_mEVkTUBExQ@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">David Hoffer &lt;dhoff...@gmail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: Maven/Nexus metadata interaction question</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Fri, 24 Aug 2012 20:52:35 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
I haven't seen that exact problem but I feel your pain.  I too spent
the better part of today trying to figure out why my build was
failing.  We have been having nothing but trouble with Nexus and
Maven3 with the time-stamped snapshots and all the various metadata
files that Nexus spits out (which confuse Maven and IDEs).  We thought
we had those resolved so now Nexus refuses to update the regular pom
file (the non-timestamped) one and of course that broke the build.  I
long for the Maven2 days of no timestamped snapshots.  Only way to
reliably build with Nexus/Maven3 is to delete the local repo it
seems...or replace Nexus with Artifactory perhaps.

On Fri, Aug 24, 2012 at 2:31 PM, Laird Nelson &lt;ljnelson@gmail.com&gt; wrote:
&gt; I fear this is a stupid question, but I can't find any information anywhere
&gt; about Maven metadata.  :-(
&gt;
&gt; I have the world's simplest Jenkins/Maven/Nexus setup.
&gt;
&gt; I have a job on Jenkins that (today only, never before) began failing
&gt; because it claims it cannot resolve various SNAPSHOT artifacts from Nexus.
&gt;  It is effectively invoking mvn -U clean install on an ear project, which
&gt; (of course, as you'd expect) has various runtime dependencies.
&gt;
&gt; The various errors look like this:
&gt;
&gt; Caused by: org.apache.maven.model.resolution.UnresolvableModelException:
&gt; Could not find artifact com.foobar.pomtype-api:pom:1.009-SNAPSHOT
&gt;
&gt;
&gt; But the pomtype-api/1.009-SNAPSHOT directory is of course present, in
&gt; the very repository that Maven itself simultaneously documents as the
&gt; place it's looking and the place that theoretically does not contain
&gt; the artifact.  It is chock full of timestamped snapshots, each of
&gt; which has a .pom extension, and each of which was uploaded
&gt; successfully by a previous Jenkins job.
&gt;
&gt;
&gt; I have run across this issue various times over the years and have
&gt; always chalked it up to black magic.  Some combination of poking and
&gt; prodding and redoing and waiting and -U etc. always seems to clear the
&gt; mud out of the mechanism.  Not this time, and I'm tired of not
&gt; understanding how this all works.
&gt;
&gt;
&gt; Guessing in the dark, I'm assuming that Maven is somehow not able to
&gt; figure out how to turn "1.009-SNAPSHOT" into, e.g.,
&gt; "1.009-20120621.124828-107" and thus concludes that there is no
&gt; 1.009-SNAPSHOT artifact at all.  Equally in the dark, I'm presuming
&gt; this has something to do with the (undocumented?) maven-metadata.xml
&gt; file, which doesn't seem to contain any useful information:
&gt;
&gt;
&gt; &lt;metadata modelVersion="1.1.0"&gt;
&gt; &lt;groupId&gt;com.foobar&lt;/groupId&gt;
&gt; &lt;artifactId&gt;pomtype-api&lt;/artifactId&gt;
&gt; &lt;version&gt;1.009-SNAPSHOT&lt;/version&gt;
&gt; &lt;versioning&gt;
&gt; &lt;snapshot&gt;
&gt; &lt;timestamp&gt;20120809.231215&lt;/timestamp&gt;
&gt; &lt;buildNumber&gt;116&lt;/buildNumber&gt;
&gt; &lt;/snapshot&gt;
&gt; &lt;lastUpdated&gt;20120809231215&lt;/lastUpdated&gt;
&gt; &lt;snapshotVersions&gt;
&gt; &lt;snapshotVersion&gt;
&gt; &lt;extension&gt;pom&lt;/extension&gt;
&gt; &lt;value&gt;1.009-20120809.231215-116&lt;/value&gt;
&gt; &lt;updated&gt;20120809231215&lt;/updated&gt;
&gt; &lt;/snapshotVersion&gt;
&gt; &lt;snapshotVersion&gt;
&gt; &lt;classifier&gt;tests&lt;/classifier&gt;
&gt; &lt;extension&gt;jar&lt;/extension&gt;
&gt; &lt;value&gt;1.009-20120809.231215-116&lt;/value&gt;
&gt; &lt;updated&gt;20120809231215&lt;/updated&gt;
&gt; &lt;/snapshotVersion&gt;
&gt; &lt;/snapshotVersions&gt;
&gt; &lt;/versioning&gt;
&gt; &lt;/metadata&gt;
&gt;
&gt;
&gt; I don't see how Maven could conclude much from this, but this seems to
&gt; be what it consults as part of its resolving snapshots; I can see this
&gt; being downloaded in the logs.
&gt;
&gt;
&gt; When Maven heads off to resolve 1.009-SNAPSHOT to a timestamped
&gt; version, how does it do it?  Why doesn't--in this case--it pick the
&gt; "most recent" snapshot, and what would cause it to do so?
&gt;
&gt;
&gt; Let's pretend just for kicks that redeploying a new snapshot is not a
&gt; possibility (the answer SURELY can't be to redeploy a new snapshot to
&gt; somehow cause the magic to happen).  What steps should I take?  Where
&gt; do I start looking to resolve this issue?
&gt;
&gt;
&gt; Thanks,
&gt;
&gt; Laird
&gt;
&gt;
&gt; --
&gt; http://about.me/lairdnelson

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201208.mbox/raw/%3cCAA8BW8E_yRbONKhujSmb4GKfMfogG3gYqO6ruC-6KzRKPCBamg@mail.gmail.com%3e/">Unnamed text/plain</a> (inline, None, 4091 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201208.mbox/raw/%3cCAA8BW8E_yRbONKhujSmb4GKfMfogG3gYqO6ruC-6KzRKPCBamg@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
