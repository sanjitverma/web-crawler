<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: Maven/Nexus metadata interaction question</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201208.mbox/%3cCAMk_Bejpr5kded_vu6gRa63m-CQ5W_Zsr=M75dqx+ckZcA=GCA@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201208.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201208.mbox/%3cCAA8BW8Gi4E+3oLqDBa1EEyNLg5wduB2sz9Cz7Dx7wo8mB65bxg@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201208.mbox/%3cCAMk_Bejpr5kded_vu6gRa63m-CQ5W_Zsr=M75dqx+ckZcA=GCA@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201208.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201208.mbox/%3cCAA8BW8Gi4E+3oLqDBa1EEyNLg5wduB2sz9Cz7Dx7wo8mB65bxg@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201208.mbox/%3cCAMk_Bejpr5kded_vu6gRa63m-CQ5W_Zsr=M75dqx+ckZcA=GCA@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201208.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201208.mbox/%3cCAA8BW8Gi4E+3oLqDBa1EEyNLg5wduB2sz9Cz7Dx7wo8mB65bxg@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201208.mbox/%3cCAMk_Bejpr5kded_vu6gRa63m-CQ5W_Zsr=M75dqx+ckZcA=GCA@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201208.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201208.mbox/%3cCAA8BW8Gi4E+3oLqDBa1EEyNLg5wduB2sz9Cz7Dx7wo8mB65bxg@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">David Hoffer &lt;dhoff...@gmail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: Maven/Nexus metadata interaction question</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Fri, 24 Aug 2012 22:01:36 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
There are several metadata files...the one I was referring to is
maven-metadata-nexus.xml.  Yeah I don't know for sure who generated
this Maven/Nexus...I just assumed Nexus because of the file name.

Yes in our builds we will sometimes run lesser important builds once a
day, or at night, javadocs is a good example.  Javadoc generation adds
considerably to the build time and doesn't have high value to be
generated with each build because they don't change that often...and
to be honest devs don't put much in javadocs anyway.

This worked fine with Maven2...since Maven2 just generated simple
snapshot jars it just overwrote the last one (which is what we want).
Now with Maven3/Nexus this is broke.

-Dave

On Fri, Aug 24, 2012 at 3:49 PM, Brian Fox &lt;brianf@infinity.nu&gt; wrote:
&gt; On Fri, Aug 24, 2012 at 5:43 PM, David Hoffer &lt;dhoffer6@gmail.com&gt; wrote:
&gt;&gt; I can't say the whole problem is with Nexus.  I can say that the
&gt;&gt; requirement in Maven3 to always use timestamped snapshots has not be
&gt;&gt; addressed in a complete way with tools like Nexus and my beloved IDE
&gt;&gt; IntelliJ.  We have hundreds if not thousands of builds happening every
&gt;&gt; day and they should be able to generate artifacts with various
&gt;&gt; classifiers, i.e. sources.jar and javadoc.jar, etc.  But they don't
&gt;&gt; all have to generate all of these classifiers with each build.  I
&gt;&gt; might want to generate javadocs just at night because the build takes
&gt;&gt; too long, etc.  Well this completely breaks Nexus and IntelliJ because
&gt;&gt; Nexus will spit out a metadata file that says that the last
&gt;&gt; timestamped build is, lets say 45, well that might be true for one of
&gt;&gt; the artifacts, lets say it was javadocs, but 45 does not yet have
&gt;&gt; sources or the main jar artifact (the latest for those is 44).
&gt;&gt; However since Nexus advertised that build 45 is the latest, all the
&gt;&gt; tools, i.e. IntelliJ go looking for artifacts for that build number
&gt;&gt; and they do not exist.  So the only workaround for that is that all
&gt;&gt; builds must include all classifiers...can't do just the one we
&gt;&gt; need/want.
&gt;
&gt; This is an interesting use case, so you run different builds that
&gt; produce different classified artifacts but not at the same time?
&gt; Maven3 allows this, it used to be Maven that would break. Will double
&gt; check this in Nexus.
&gt;
&gt;&gt;
&gt;&gt; I don't know if the same problem exists with Artifactory...all I can
&gt;&gt; say is that I have not seen these types of errors using that repo
&gt;&gt; manager.
&gt;&gt;
&gt;&gt; Then there is the local repo size problem with timestamped
&gt;&gt; snapshots...my hard drive is just not big enough for that.
&gt;&gt; Timestamped snapshots is a solution to a problem I've never seen.  I
&gt;&gt; expect snapshots to change so never want to be wed to a particular
&gt;&gt; one.
&gt;&gt;
&gt;&gt; -Dave
&gt;&gt;
&gt;&gt; On Fri, Aug 24, 2012 at 3:27 PM, Laird Nelson &lt;ljnelson@gmail.com&gt; wrote:
&gt;&gt;&gt; On Fri, Aug 24, 2012 at 1:52 PM, David Hoffer &lt;dhoffer6@gmail.com&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; We have been having nothing but trouble with Nexus and
&gt;&gt;&gt;&gt; Maven3 with the time-stamped snapshots and all the various metadata
&gt;&gt;&gt;&gt; files that Nexus spits out (which confuse Maven and IDEs).
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Oh, so this whole thing is a Nexus problem?  Is that why none of my
&gt;&gt;&gt; maven-metadata.xml files in my SNAPSHOT directories in my Nexus repository
&gt;&gt;&gt; feature a &lt;latest&gt; tag (mind you, I'm guessing in the dark here about what
&gt;&gt;&gt; this tag is for, and also guessing that it is used in resolving SNAPSHOTs)?
&gt;&gt;&gt;  Am I wrong in thinking that these files *should* feature such a tag if
&gt;&gt;&gt; they are to be useful at all?  Where would I go to learn more information
&gt;&gt;&gt; about this?
&gt;&gt;&gt;
&gt;&gt;&gt; It certainly seems to be the case from others I've talked to that the
&gt;&gt;&gt; "solution" is "redeploy another SNAPSHOT; that's the only way to get rid of
&gt;&gt;&gt; this, and we don't know why it happens either".  Surely that can't be the
&gt;&gt;&gt; case.  Surely there's some way to convince Maven to figure out what the
&gt;&gt;&gt; latest SNAPSHOT is in a directory?  Or to otherwise help it correct its
&gt;&gt;&gt; mistaken belief that there are *no* *possible* snapshot resolutions?  Is
&gt;&gt;&gt; this a rare problem?
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks for the input, David.
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; Laird
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; http://about.me/lairdnelson
&gt;&gt;
&gt;&gt; ---------------------------------------------------------------------
&gt;&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt;&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;&gt;
&gt;
&gt; ---------------------------------------------------------------------
&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201208.mbox/raw/%3cCAA8BW8G2rCJ6292cz8StkGGq98ejvu6asq8=VtuKL4q3aS2M1A@mail.gmail.com%3e/">Unnamed text/plain</a> (inline, None, 4781 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201208.mbox/raw/%3cCAA8BW8G2rCJ6292cz8StkGGq98ejvu6asq8=VtuKL4q3aS2M1A@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
