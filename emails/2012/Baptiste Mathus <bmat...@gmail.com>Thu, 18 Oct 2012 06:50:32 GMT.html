<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: integration-test, testNG, and a CI server</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201210.mbox/%3c20121018075803.7c72330d@linux-du93.site%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201210.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201210.mbox/%3c66E38C42347D6446BF7FCB22C3D3878072DFCE8C7E@ECCR06PUBLIC.exchange.local%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201210.mbox/%3c1350481204345-5726939.post@n5.nabble.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201210.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201210.mbox/%3c66E38C42347D6446BF7FCB22C3D3878072DFCE8C7E@ECCR06PUBLIC.exchange.local%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201210.mbox/%3c20121018075803.7c72330d@linux-du93.site%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201210.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201210.mbox/%3c66E38C42347D6446BF7FCB22C3D3878072DFCE8C7E@ECCR06PUBLIC.exchange.local%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201210.mbox/%3c1350481204345-5726939.post@n5.nabble.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201210.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201210.mbox/%3c66E38C42347D6446BF7FCB22C3D3878072DFCE8C7E@ECCR06PUBLIC.exchange.local%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Baptiste Mathus &lt;bmat...@gmail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: integration-test, testNG, and a CI server</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Thu, 18 Oct 2012 06:50:32 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
Hi,
Currently offline so I can't give you precise links now, but search Google
for "maven lifecycle".

What you encounter is normal and it's basically not possible to change it
easily (I mean having the pre-integration-test not running before
integration-test phase).

Goals are things you can bind to phases. And some goals are actually bound
by default to some phases of the different standard lifecycle.

So I guess what you could do is running explicitly the goals you're
interested in. But then you should be aware that explicitly running goals
in the Maven world is actually not the typical case.

Maven is about build standardization. People who want to build your project
should not have to know the different necessary goals you need.

If what you want is having a way to disable some parts of the build by
default (or the contrary), then look at Maven profiles.

Cheers
Le 17 oct. 2012 15:40, "mlandman99" &lt;mlandman99@gmail.com&gt; a Ã©crit :

&gt; Hi,
&gt;
&gt; I have a maven project (Project 1) which is intended for executing
&gt; integration tests. Inside this project is an additional class that helps me
&gt; automate the deployment of various jars to a nexus repo.
&gt;
&gt; Project 1 is dependent on those jars (SNAPSHOT).
&gt; Project 2 is dependent on those jars (SNAPSHOT).
&gt; Project 1 is also dependent on project 2. (SNAPSHOT).
&gt;
&gt; STEP 1: My CI server (TeamCity) runs a daily build config called "Deploy
&gt; Jars" @ 4:00 AM on Project 1, with Maven phase: "pre-integration-test".
&gt;
&gt; pre-integration-test runs a testNG suite that has the class for deploying
&gt; those jars to the repo. Works fine. Only that class runs.
&gt;
&gt; STEP 2: Next, my CI server has a build trigger for project 2 (to compile
&gt; and
&gt; deploy) to occur anytime "Deploy Jars" is successfully built. This works --
&gt; project 2 is built (and project 2 updated its SNAPSHOT dependencies on
&gt; those
&gt; Jars that were sent to the repo in step 1). Project 2 is compiled and it's
&gt; .jar deployed to the repo as well.
&gt;
&gt; STEP 3: Back to Project 1. Now that all the .jars have been uploaded to the
&gt; repo (various jars, including the .jar for project 2, as described in step
&gt; 2), A Maven build is run with phase "integration-test".
&gt;
&gt; THE PROBLEM:
&gt;
&gt; Unfortunately when I do STEP 3, Maven ends up also RE-RUNNING
&gt; pre-integration test prior to integration-test, which basically reruns the
&gt; actions that already occurred in STEP 1. (i.e. all those jars are sent to
&gt; the repo again).
&gt;
&gt; That probably makes sense, in that Maven is probably hardwired to run
&gt; "pre-integration-test" any time I ask it to run "integration-test".
&gt;
&gt; I'd like to find a way out of this -- any suggestions? Is there another
&gt; maven "phase" I can take advantage of here, to accomplish my objective?
&gt; Basically, I don't want step 3 (integration-test) to re-copy those jars to
&gt; the repo, it's a waste of time, etc.
&gt;
&gt; Thanks in advance!
&gt;
&gt; Bonus question -- am I getting 'phase' and 'goal' mixed up? My POM file
&gt; says
&gt; that "pre-integration-test" and "integration-test" are "phases". They both
&gt; have a "goal" of "test". But in my CI server, I have "pre-integration-test"
&gt; and "integration-test" listed as GOALS the maven build configuration on the
&gt; CI server, and that seems to be working (for the most part). In other words
&gt; the build configuration for STEP 1 only lists "pre-integration-test" for a
&gt; goal, and that works, but the POM file only lists "pre-integration-test" as
&gt; a "phase"...
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; View this message in context:
&gt; http://maven.40175.n5.nabble.com/integration-test-testNG-and-a-CI-server-tp5726939.html
&gt; Sent from the Maven - Users mailing list archive at Nabble.com.
&gt;
&gt; ---------------------------------------------------------------------
&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;
&gt;

</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li>Unnamed multipart/alternative (inline, None, 0 bytes)</li>
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201210.mbox/raw/%3cCANWgJS664Amz_21OKKbkj0sHVar_nksQvjVLsuL-8LhzG+xFcw@mail.gmail.com%3e/1">Unnamed text/plain</a> (inline, Quoted Printable, 3879 bytes)</li>
</ul>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201210.mbox/raw/%3cCANWgJS664Amz_21OKKbkj0sHVar_nksQvjVLsuL-8LhzG+xFcw@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
