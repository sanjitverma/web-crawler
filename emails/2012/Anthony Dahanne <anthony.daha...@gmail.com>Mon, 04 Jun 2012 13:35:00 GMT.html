<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: maven dependency plugin and maven 3</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201206.mbox/%3cCALcFPWGEyL_=VNEaOp=x45KVGK01WkRVeKkPMent6UY13ESU_A@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201206.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201206.mbox/%3c20120604134820.61090@gmx.net%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201206.mbox/%3c75F3A2D98EDE2545BDC06B5B6C1CEC5149D0A7C2@ESESSMW1739.eemea.ericsson.se%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201206.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201206.mbox/%3cCALy+7UmT9iYjqtzWDonc0ou-pAxC--0XiAOhZsuYjqh4gw=ZSg@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201206.mbox/%3cCALcFPWGEyL_=VNEaOp=x45KVGK01WkRVeKkPMent6UY13ESU_A@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201206.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201206.mbox/%3c20120604134820.61090@gmx.net%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201206.mbox/%3c75F3A2D98EDE2545BDC06B5B6C1CEC5149D0A7C2@ESESSMW1739.eemea.ericsson.se%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201206.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201206.mbox/%3cCALy+7UmT9iYjqtzWDonc0ou-pAxC--0XiAOhZsuYjqh4gw=ZSg@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Anthony Dahanne &lt;anthony.daha...@gmail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: maven dependency plugin and maven 3</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Mon, 04 Jun 2012 13:35:00 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
Update !
Creating a jira for this issue, providing the same example pom,
http://jira.codehaus.org/secure/attachment/60149/pom.xml
when I tried to reproduce on a linux box, with the latest maven 3.0.4
&gt;&gt; &gt; 1) do a mvn package
&gt;&gt; &gt; 2) then do a mvn org.apache.maven.plugins:maven-dependency-plugin:2.4:purge-local-repository
-Dverbose=true   -DresolutionFuzziness=version

it actually worked as designed :


ubuntu@ubuntu-server:~/maven-issue$ /opt/apache-maven-3.0.4/bin/mvn
org.apache.maven.plugins:maven-dependency-plugin:2.4:purge-local-repository
-Dverbose=true   -DresolutionFuzziness=version
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building pof 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-dependency-plugin:2.4:purge-local-repository
(default-cli) @ pof ---
[WARNING] Missing POM for javax.servlet:servlet-api:jar:2.5
[WARNING] Missing POM for net.dahanne.gallery:commons-gallery:jar:2.1.0-SNAPSHOT
[INFO] Processing dependencies for project: net.dahanne:pof:jar:1.0.0-SNAPSHOT
[INFO] Processing artifact: javax.servlet:servlet-api:jar:2.5
[INFO] Deleting: /home/ubuntu/.m2/repository/javax/servlet/servlet-api/2.5
[INFO] Re-resolving.
Downloading: http://nexus.dahanne.net/nexus/content/repositories/snapshots/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar
Downloading: http://nexus.dahanne.net/nexus/content/repositories/releases/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar
Downloading: http://repo.maven.apache.org/maven2/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar
Downloaded: http://repo.maven.apache.org/maven2/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar
(103 KB at 15.9 KB/sec)
[INFO] Processing artifact:
net.dahanne.gallery:commons-gallery:jar:2.1.0-SNAPSHOT
[INFO] Deleting:
/home/ubuntu/.m2/repository/net/dahanne/gallery/commons-gallery/2.1.0-SNAPSHOT
[INFO] Re-resolving.
Downloading: http://nexus.dahanne.net/nexus/content/repositories/snapshots/net/dahanne/gallery/commons-gallery/2.1.0-SNAPSHOT/maven-metadata.xml
Downloading: http://nexus.dahanne.net/nexus/content/repositories/releases/net/dahanne/gallery/commons-gallery/2.1.0-SNAPSHOT/maven-metadata.xml
Downloaded: http://nexus.dahanne.net/nexus/content/repositories/snapshots/net/dahanne/gallery/commons-gallery/2.1.0-SNAPSHOT/maven-metadata.xml
(998 B at 2.1 KB/sec)
Downloading: http://nexus.dahanne.net/nexus/content/repositories/snapshots/net/dahanne/gallery/commons-gallery/2.1.0-SNAPSHOT/commons-gallery-2.1.0-20120525.140124-5.jar
Downloaded: http://nexus.dahanne.net/nexus/content/repositories/snapshots/net/dahanne/gallery/commons-gallery/2.1.0-SNAPSHOT/commons-gallery-2.1.0-20120525.140124-5.jar
(16 KB at 23.3 KB/sec)
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 17.522s
[INFO] Finished at: Mon Jun 04 09:10:33 EDT 2012
[INFO] Final Memory: 6M/14M
[INFO] ------------------------------------------------------------------------

my dependencies were deleted and re resolved !
One thing though, is that I still had those messages :
[WARNING] Missing POM for javax.servlet:servlet-api:jar:2.5
[WARNING] Missing POM for net.dahanne.gallery:commons-gallery:jar:2.1.0-SNAPSHOT
even though those 2 artifacts are existing in my local repo.
So I created  a bug in the maven dependency plugin Jira :
http://jira.codehaus.org/browse/MDEP-356
to consider the use of maven 3 dependency resolver in the maven
dependency plugin

Thanks,
Anthony


On Mon, Jun 4, 2012 at 4:09 AM, Stephen Connolly
&lt;stephen.alan.connolly@gmail.com&gt; wrote:
&gt; From what I recall, nobody has yet updated dependency:tree to query
&gt; aether's graph directly rather than go through the emulation of 2.x's API
&gt; for examining the dependency tree. When I last chatted on this with
&gt; Benjamin, he left me with the distinct impression that I should not rely on
&gt; the output of dependency:tree when run on m3 until it has been adapted to
&gt; query aether's graph more directly... But having said all that, I usually
&gt; find it "good enough" and it may just be some edge cases that Benjamin was
&gt; referring to, in which case I would suspect this is one of those edges.
&gt;
&gt; On Sunday, 3 June 2012, Jason van Zyl wrote:
&gt;
&gt;&gt; You need to make a test case so we can reproduce it. It's impossible to
&gt;&gt; tell whether it's you, your environment, the dependency plugin or Maven
&gt;&gt; itself from looking at the textual output of the build.
&gt;&gt;
&gt;&gt; On Jun 3, 2012, at 11:42 AM, Anthony Dahanne wrote:
&gt;&gt;
&gt;&gt; &gt; Hello  all,
&gt;&gt; &gt; sorry to bump ... :-(
&gt;&gt; &gt; but I'm still having issues understanding what's wrong with the maven
&gt;&gt; &gt; dependency plugin and maven 3...
&gt;&gt; &gt; I attached a pom to demonstrate the problem :
&gt;&gt; &gt; Using maven 3,
&gt;&gt; &gt; 1) do a mvn package
&gt;&gt; &gt; 2) then do a mvn
&gt;&gt; &gt;
&gt;&gt; org.apache.maven.plugins:maven-dependency-plugin:2.4:purge-local-repository
&gt;&gt; &gt; -Dverbose=true   -DresolutionFuzziness=version -U
&gt;&gt; &gt;
&gt;&gt; &gt; You will see the following output :
&gt;&gt; &gt; [INFO] --- maven-dependency-plugin:2.4:purge-local-repository
&gt;&gt; &gt; (default-cli) @ pof ---
&gt;&gt; &gt; [WARNING] Missing POM for javax.servlet:servlet-api:jar:2.5
&gt;&gt; &gt; [INFO] Skipping: pof. It cannot be resolved.
&gt;&gt; &gt; [INFO] Nothing to do for project: net.dahanne:pof:jar:1.0.0-SNAPSHOT
&gt;&gt; &gt;
&gt;&gt; &gt; But I can tell you javax.servlet:servlet-api:jar:2.5 has a pom, and is
&gt;&gt; &gt; already installed in the local maven repository.
&gt;&gt; &gt;
&gt;&gt; &gt; Could you guys share some light on this ? I think the maven dependency
&gt;&gt; &gt; plugin is not working fine with maven 3 , as opposed to what the
&gt;&gt; &gt; documentation says :
&gt;&gt; &gt; https://cwiki.apache.org/MAVEN/maven-3x-plugin-compatibility-matrix.html
&gt;&gt; &gt;
&gt;&gt; &gt; Thanks,
&gt;&gt; &gt; Anthony
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; ---------- Forwarded message ----------
&gt;&gt; &gt; From: Anthony Dahanne &lt;anthony.dahanne@gmail.com &lt;javascript:;&gt;&gt;
&gt;&gt; &gt; Date: Thu, May 31, 2012 at 5:50 PM
&gt;&gt; &gt; Subject: maven dependency plugin and maven 3
&gt;&gt; &gt; To: users@maven.apache.org &lt;javascript:;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Hello all,
&gt;&gt; &gt; I'm only using maven 3 on my machine (be it command line or m2e).
&gt;&gt; &gt; I tried to use the maven dependency plugin on a project,
&gt;&gt; &gt;
&gt;&gt; &gt; mvn
&gt;&gt; org.apache.maven.plugins:maven-dependency-plugin:2.4:purge-local-repository
&gt;&gt; &gt; -Dverbose=true   -DresolutionFuzziness=version
&gt;&gt; &gt;
&gt;&gt; &gt; and it printed such warnings :
&gt;&gt; &gt;
&gt;&gt; &gt; [WARNING] Missing POM for javax.servlet:servlet-api:jar:2.5
&gt;&gt; &gt; [WARNING] Missing POM for org.easymock:easymock:jar:3.0
&gt;&gt; &gt; [WARNING] Missing POM for junit:junit:jar:4.8.2
&gt;&gt; &gt;
&gt;&gt; &gt; before telling me that the build was successful.
&gt;&gt; &gt; Thing is, it did not purge anything from my repo; because of those
&gt;&gt; &gt; warnings actually; launching the same command with -X, I could see :
&gt;&gt; &gt; [DEBUG] Verifying availability of
&gt;&gt; &gt;
&gt;&gt; /Users/anthony/.m2/repository/javax/servlet/servlet-api/2.5/servlet-api-2.5.pom
&gt;&gt; &gt; from []
&gt;&gt; &gt; [WARNING] Missing POM for javax.servlet:servlet-api:jar:2.5: Error
&gt;&gt; &gt; resolving project artifact: Could not find artifact
&gt;&gt; &gt; javax.servlet:servlet-api:pom:2.5 for project
&gt;&gt; &gt; javax.servlet:servlet-api:pom:2.5
&gt;&gt; &gt; [DEBUG]   javax.servlet:servlet-api:jar:2.5:provided (selected for
&gt;&gt; provided)
&gt;&gt; &gt;
&gt;&gt; &gt; and... I can tell you
&gt;&gt; &gt;
&gt;&gt; /Users/anthony/.m2/repository/javax/servlet/servlet-api/2.5/servlet-api-2.5.pom
&gt;&gt; &gt; exists and contains :
&gt;&gt; &gt; &lt;project&gt;
&gt;&gt; &gt;  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
&gt;&gt; &gt;  &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
&gt;&gt; &gt;  &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
&gt;&gt; &gt;  &lt;version&gt;2.5&lt;/version&gt;
&gt;&gt; &gt; &lt;/project&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Debugging the code a little, I could notice that this goal was using
&gt;&gt; &gt;
&gt;&gt; org.apache.maven.artifact.resolver.DefaultArtifactResolver#resolveTransitively
&gt;&gt; &gt; from maven-artifact-manager 2.0.9 to find the dependencies.
&gt;&gt; &gt;
&gt;&gt; &gt; I am wondering if this plugin failed purging my dependencies because
&gt;&gt; &gt; it used a maven 2 library to scan the dependencies, and my local repo
&gt;&gt; &gt; has only been built and used by mvn3 (and the repo metadata/layout
&gt;&gt; &gt; could be different to what this plugin was expecting) ..
&gt;&gt; &gt; Any thoughts ?
&gt;&gt; &gt; thanks a lot in advance
&gt;&gt; &gt; Anthony
&gt;&gt; &gt; &lt;pom.xml&gt;
&gt;&gt; &gt; ---------------------------------------------------------------------
&gt;&gt; &gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org&lt;javascript:;&gt;
&gt;&gt; &gt; For additional commands, e-mail: users-help@maven.apache.org&lt;javascript:;&gt;
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt;
&gt;&gt; Jason
&gt;&gt;
&gt;&gt; ----------------------------------------------------------
&gt;&gt; Jason van Zyl
&gt;&gt; Founder &amp; CTO, Sonatype
&gt;&gt; Founder,  Apache Maven
&gt;&gt; http://twitter.com/jvanzyl
&gt;&gt; ---------------------------------------------------------
&gt;&gt;
&gt;&gt; To do two things at once is to do neither.
&gt;&gt;
&gt;&gt;  -—Publilius Syrus, Roman slave, first century B.C.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201206.mbox/raw/%3cCAJHJdS_x=LYviUv0yZ+60839X2_JUk3-ZtOSCmN88v++FO0jtg@mail.gmail.com%3e/">Unnamed text/plain</a> (inline, Quoted Printable, 9102 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201206.mbox/raw/%3cCAJHJdS_x=LYviUv0yZ+60839X2_JUk3-ZtOSCmN88v++FO0jtg@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
