<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: Can't read phase value from properties file...</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201206.mbox/%3cCAA8BW8HLOrS45uw7-SdpFf+Pa_CihZFXhJ3LThozQ97czf3pvg@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201206.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201206.mbox/%3c4FE245F9.9000801@artifact-software.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201206.mbox/%3c1340206241695-5711621.post@n5.nabble.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201206.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201206.mbox/%3c1340296206398-5711729.post@n5.nabble.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201206.mbox/%3cCAA8BW8HLOrS45uw7-SdpFf+Pa_CihZFXhJ3LThozQ97czf3pvg@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201206.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201206.mbox/%3c4FE245F9.9000801@artifact-software.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201206.mbox/%3c1340206241695-5711621.post@n5.nabble.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201206.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201206.mbox/%3c1340296206398-5711729.post@n5.nabble.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Aliaksei Lahachou &lt;aliaksei.lahac...@googlemail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: Can't read phase value from properties file...</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Wed, 20 Jun 2012 21:16:23 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
I see a couple of reasons why it will not work:

1. Maven interpolates expressions when the model is read. Mojo
configuration is reinterpolated before mojo is executed with exception of
PlexusConfiguration fields (which may be a bug). But if loaded property is
used outside a configuration, let's say in &lt;resource&gt;/&lt;directory&gt; it will
not be reinterpolated.
2. Complete execution plan is calculated before any plugin is executed, so
you cannot change execution phase later. This can be overcome by an
extension, which is executed before execution plan is calculated.

Check build-congurator-maven-plugin and build-configurator-maven-extension
[1]. build-congurator-maven-plugin overcomes the first problem - it
reinterpolates the model and mojo executions, so loaded properties are
visible everywhere. build-configurator-maven-extension overcomes the second
problem. Besides, it has some nice features like EL support in property
files. It's currently under development with snapshots published to [2],
but unit-test coverage is over 90% so it's very stable.

There is also an m2e-connector for build-congurator-maven-plugin, which
currently correctly loads properties and reinterpolates mojo executions [3].

[1] http://htfv.github.com/build-configurator/
[2] https://oss.sonatype.org/content/repositories/snapshots/
[3] http://htfv.github.com/m2e-connectors/updates/1.0.0-SNAPSHOT/


Regards,
htfv (Aliaksei Lahachou)


On Wed, Jun 20, 2012 at 5:30 PM, sureshrk19 &lt;sureshrk19@gmail.com&gt; wrote:

&gt; Hi,
&gt;
&gt; Following is the pom.xml snippet...
&gt;
&gt; &lt;plugin&gt;
&gt;        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
&gt;        &lt;artifactId&gt;properties-maven-plugin&lt;/artifactId&gt;
&gt;        &lt;version&gt;1.0-alpha-2&lt;/version&gt;
&gt;        &lt;executions&gt;
&gt;                &lt;execution&gt;
&gt;                &lt;phase&gt;initialize&lt;/phase&gt;
&gt;                &lt;goals&gt;
&gt;                        &lt;goal&gt;read-project-properties&lt;/goal&gt;
&gt;                &lt;/goals&gt;
&gt;                &lt;configuration&gt;
&gt;                        &lt;files&gt;
&gt;                           &lt;file&gt;my.properties&lt;/file&gt;
&gt;                        &lt;/files&gt;
&gt;                        &lt;/configuration&gt;
&gt;                 &lt;/execution&gt;
&gt;        &lt;/executions&gt;
&gt; &lt;/plugin&gt;
&gt;
&gt; then, I'm trying to read "exec.type" value from properties file.
&gt;
&gt; &lt;plugin&gt;
&gt;        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
&gt;        &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;
&gt;        &lt;executions&gt;
&gt;                &lt;execution&gt;
&gt;                        &lt;phase&gt;${exec.type}&lt;/phase&gt;
&gt;                          .......
&gt;                          ......
&gt; &lt;/plugin&gt;
&gt;
&gt;
&gt; seems ${exec.type} value is not being read from properties file. where as,
&gt; I
&gt; have another property defined in same properties is working fine..
&gt;
&gt; &lt;plugin&gt;
&gt;        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
&gt;        &lt;version&gt;2.2&lt;/version&gt;
&gt;        &lt;configuration&gt;
&gt;                &lt;webappDirectory&gt;${deploy.dir}&lt;/webappDirectory&gt;
&gt;                ....
&gt; &lt;/plugin&gt;
&gt;
&gt; Not sure, how these 2 are different.
&gt;
&gt; PS: I tried following and able to read ${exec.type}
&gt; 1) If I define exec.type in pom.xml
&gt; &lt;properties&gt;
&gt;        &lt;exec.type&gt;package&lt;/exec.type&gt;
&gt; &lt;/properties&gt;
&gt; or
&gt; 2) If I define exec.type=package as windows environment variable then, also
&gt; it is fine.
&gt;
&gt; Only problem is I'm not able to read from properties file.
&gt;
&gt; Any pointers would be highly appreciated.
&gt;
&gt; Thanks,
&gt; SR
&gt;
&gt;
&gt;
&gt; --
&gt; View this message in context:
&gt; http://maven.40175.n5.nabble.com/Can-t-read-phase-value-from-properties-file-tp5711621.html
&gt; Sent from the Maven - Users mailing list archive at Nabble.com.
&gt;
&gt; ---------------------------------------------------------------------
&gt; To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
&gt; For additional commands, e-mail: users-help@maven.apache.org
&gt;
&gt;

</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li>Unnamed multipart/alternative (inline, None, 0 bytes)</li>
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201206.mbox/raw/%3cCALcFPWE9z4Fg3iotnCg=Bysvj=2Lsj0uBtChCpcomb3hogFw+w@mail.gmail.com%3e/1">Unnamed text/plain</a> (inline, None, 3755 bytes)</li>
</ul>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201206.mbox/raw/%3cCALcFPWE9z4Fg3iotnCg=Bysvj=2Lsj0uBtChCpcomb3hogFw+w@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
