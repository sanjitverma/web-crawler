<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Activate two profiles at default</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201207.mbox/%3c500D6557.9000808@adesso.at%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201207.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201207.mbox/%3c500D6E83.3010204@adesso.at%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201207.mbox/%3c500D5338.9040301@adesso.at%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201207.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201207.mbox/%3c500D6E83.3010204@adesso.at%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201207.mbox/%3c500D6557.9000808@adesso.at%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201207.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201207.mbox/%3c500D6E83.3010204@adesso.at%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201207.mbox/%3c500D5338.9040301@adesso.at%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201207.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201207.mbox/%3c500D6E83.3010204@adesso.at%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Andreas Riedel &lt;riedelandr...@yahoo.de&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Activate two profiles at default</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Mon, 23 Jul 2012 15:26:06 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
Hello users,

I have the following problem:
  - One system must be compiled with two different JDK.
  - I have two test suites, one for smoke test, one for all.

Base scenario:
  - Two profiles, 'SmokeTest' activate by default, 'All' activate by
    switch -P.
  - One additional profile with dependencies only required for build by
    JDK 1.5. At JDK 1.6 these dependencies are part of the JDK itself.

In the POM this is realize as follow:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
  &lt;profiles&gt;
    &lt;profile&gt;
      &lt;id&gt;smokeTest&lt;/id&gt;
      &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
      &lt;/activation&gt;
      &lt;build&gt;
        &lt;plugins&gt;
          &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
            &lt;configuration&gt;
              &lt;suiteXmlFiles&gt;
                &lt;suiteXmlFile&gt;src/test/misc/smoke.testng.xml&lt;/suiteXmlFile&gt;
              &lt;/suiteXmlFiles&gt;
            &lt;/configuration&gt;
          &lt;/plugin&gt;
        &lt;/plugins&gt;
      &lt;/build&gt;
    &lt;/profile&gt;
    &lt;profile&gt;
      &lt;id&gt;jdk__1_5&lt;/id&gt;
      &lt;activation&gt;
        &lt;jdk&gt;1.5&lt;/jdk&gt;
      &lt;/activation&gt;
      &lt;dependencies&gt;
        ...........
      &lt;/dependencies&gt;
    &lt;/profile&gt;
    &lt;profile&gt;
      &lt;id&gt;broadsideTest&lt;/id&gt;
      &lt;build&gt;
        &lt;plugins&gt;
          &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
            &lt;configuration&gt;
              &lt;suiteXmlFiles&gt;
                &lt;suiteXmlFile&gt;......&lt;/suiteXmlFile&gt;
                &lt;suiteXmlFile&gt;......&lt;/suiteXmlFile&gt;
                &lt;suiteXmlFile&gt;......&lt;/suiteXmlFile&gt;
                &lt;suiteXmlFile&gt;......&lt;/suiteXmlFile&gt;
                &lt;suiteXmlFile&gt;......&lt;/suiteXmlFile&gt;
                &lt;suiteXmlFile&gt;......&lt;/suiteXmlFile&gt;
                &lt;suiteXmlFile&gt;......&lt;/suiteXmlFile&gt;
                &lt;suiteXmlFile&gt;......&lt;/suiteXmlFile&gt;
              &lt;/suiteXmlFiles&gt;
            &lt;/configuration&gt;
          &lt;/plugin&gt;
        &lt;/plugins&gt;
      &lt;/build&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;

&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;


What I need:
  - Default test to run should always be the smoketest.
  - Under JDK 1.5 the dependencies should be included, but the smoke
    test should also run.

And this is the problem:
  - Under jdk 1.6 it works correct.
  - With JDK 1.5 the profile for JDK 1.5 is taken. I understand the
    logic, but for this scenario it is wrong.
    It should be taken the dependencies from JDK 1.5 profiles and 
    additionally the smoketest should run.
  - This means, the default behaviour should be something like:
    &gt;&gt;&gt;
    mvn help:active-profiles -P smokeTest
    
    The following profiles are active:
     - smokeTest (source: pom)
     - jdk__1_5 (source: pom)
    &lt;&lt;&lt; 
    
    

Any idea what would be the best way to realize this?

TIA
  Andraes

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201207.mbox/raw/%3c1343057166.12901.YahooMailNeo@web171303.mail.ir2.yahoo.com%3e/">Unnamed text/plain</a> (inline, Quoted Printable, 4304 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201207.mbox/raw/%3c1343057166.12901.YahooMailNeo@web171303.mail.ir2.yahoo.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
