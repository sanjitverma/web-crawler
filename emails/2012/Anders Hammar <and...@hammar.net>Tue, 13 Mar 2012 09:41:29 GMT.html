<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: how to custom decrypt settings.xml passwords</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201203.mbox/%3cCAC589WjJ1skfZp0+Dq2kNDn3vZSTXudKquDvEduSTYCQ=fmmHw@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201203.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201203.mbox/%3c2AABD6C4E379F04AAFEE26CA8D93ECAE187BB09C80@SMAPEXMBX1.prod.ad.merc.chicago.cme.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201203.mbox/%3cCAC589WjJ1skfZp0+Dq2kNDn3vZSTXudKquDvEduSTYCQ=fmmHw@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201203.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201203.mbox/%3c2AABD6C4E379F04AAFEE26CA8D93ECAE187BB09C80@SMAPEXMBX1.prod.ad.merc.chicago.cme.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201203.mbox/%3cCAC589WjJ1skfZp0+Dq2kNDn3vZSTXudKquDvEduSTYCQ=fmmHw@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201203.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201203.mbox/%3c2AABD6C4E379F04AAFEE26CA8D93ECAE187BB09C80@SMAPEXMBX1.prod.ad.merc.chicago.cme.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201203.mbox/%3cCAC589WjJ1skfZp0+Dq2kNDn3vZSTXudKquDvEduSTYCQ=fmmHw@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201203.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201203.mbox/%3c2AABD6C4E379F04AAFEE26CA8D93ECAE187BB09C80@SMAPEXMBX1.prod.ad.merc.chicago.cme.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Anders Hammar &lt;and...@hammar.net&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: how to custom decrypt settings.xml passwords</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Tue, 13 Mar 2012 09:41:29 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
I don't think this is possible to do through a Maven plugin. It has to
be part of Maven core.
Unfortunately, Maven Core currently does not (that I've found) provide
with a hook or extension to switch the encryption mechanism. Until
that is implemented, I believe you need to create your own extended
Maven installation with support for this.

I'm in a similar situation. For a corporate environment with fairly
high security concerns, the current solution with passwords in
settings.xml is a problem in general. Also, it causes problems on CI
as the credentials are quite easy to get hold of (a simple Maven build
will reveal it). So, currently, we've not allowed CI to deploy
artifacts to the repo.

So, from my perspective there are different things to solve (in my
case at least):
* A simpler/better solution to handle the users' credentials. This
could be integration with smart cards, Windows SSO (kerberos?), etc.
The user shouldn't have to update the settings.xml.
* A good/secure integration between CI and the repo. Ultimately I'd
like the end user's credentails to be used (not a generic CI account
as I want to know exactly who pressed the build button). If a generic
CI account is used, it has to be kept outside of the Maven Core loop
so that it can't be snooped.

/Anders
On Tue, Mar 13, 2012 at 10:07, Lannoye Xavier &lt;lannoye.xavier@gmail.com&gt; wrote:
&gt; Hi
&gt;
&gt; I'm working in a corporate environment, with maven builds processed on
&gt; atlassian bamboo servers. I've been asked to investigate a solution to
&gt; encrypt passwords present in the custom settings.xml file against our
&gt; corporate encryption software.
&gt;
&gt; I've started with the maven's master-password procedure, but with this
&gt; procedure, we faced the distributed bamboo's remote agents issue. passwords
&gt; must be encrypted using the master password of the server it is going to be
&gt; decrypted later on, and with bamboo agents, you cannot guarantee on which
&gt; server the build will be executed.
&gt;
&gt; Then I read about ssh encrypted passwords, but this requires ssh login for
&gt; each of our customers on our servers, which they don't have. We have to
&gt; many users to create unix accounts for each of them, and furthermore, we
&gt; don't want them to access our servers by other meanings than the bamboo
&gt; interface. Not mentioning they should have access to every remote agent.
&gt;
&gt; so this is why we finally get to the point we need to force our bamboo
&gt; users to include in their project their own settings.xml file, which they
&gt; call in their build with the "-s" parameter.
&gt; in settings.xml however, the passwords are plain text, and so are readable
&gt; by anyone.
&gt;
&gt; I was thinking about writing a maven plugin which could use our corporate
&gt; encryption software to decrypt passwords. But I cannot figure out how to
&gt; hook this inside maven. I already wrote a plugin that reads the
&gt; settings.xml file, but how to "push" the decrypted password inside the
&gt; maven build process? I'd need something as a "hook" but cannot find any.
&gt;
&gt; Thanks for everyone for taking the time to read this (quite) long message.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201203.mbox/raw/%3cCAKDUN1u1hfRbH-xaEv+xwgn2PtX2xVB-qmASJ=muJ=xmTAU-nQ@mail.gmail.com%3e/">Unnamed text/plain</a> (inline, None, 3272 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201203.mbox/raw/%3cCAKDUN1u1hfRbH-xaEv+xwgn2PtX2xVB-qmASJ=muJ=xmTAU-nQ@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
