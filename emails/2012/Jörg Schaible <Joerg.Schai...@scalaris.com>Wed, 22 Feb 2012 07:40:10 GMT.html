<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: Maven 3.0.3 Not Allowing Different Versions for Compile/Test</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>maven-users mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/maven-users" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/maven-users/201202.mbox/%3c1329889734622-5504204.post@n5.nabble.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201202.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201202.mbox/%3cCA+nPnMzEzde8axP=zUp8RdEMeBB7XFuANngaQJ1nB1gkwxxGDQ@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201202.mbox/%3cCAMRhZm5k2Y9kFWtzV7uT50nc8kb2Doq8Uw0SSwbvozDYeo=Vmg@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201202.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201202.mbox/%3cCA+nPnMzRPON_rEiusMMKnqxJ-UVbu_1q2XW0McojenUGe5qY9g@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/maven-users/201202.mbox/%3c1329889734622-5504204.post@n5.nabble.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/maven-users/201202.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/maven-users/201202.mbox/%3cCA+nPnMzEzde8axP=zUp8RdEMeBB7XFuANngaQJ1nB1gkwxxGDQ@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/maven-users/201202.mbox/%3cCAMRhZm5k2Y9kFWtzV7uT50nc8kb2Doq8Uw0SSwbvozDYeo=Vmg@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/maven-users/201202.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/maven-users/201202.mbox/%3cCA+nPnMzRPON_rEiusMMKnqxJ-UVbu_1q2XW0McojenUGe5qY9g@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">Jörg Schaible &lt;Joerg.Schai...@scalaris.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: Maven 3.0.3 Not Allowing Different Versions for Compile/Test</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Wed, 22 Feb 2012 07:40:10 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
Hi Daniel,

Daniel Jones wrote:

&gt; Hi all,
&gt; 
&gt; Apologies in advance if this isn't the right list to post to.
&gt; 
&gt; Using Maven 3.0.3 and Dependency plug-in 2.4, I've encountered a
&gt; strange issue whereby if I specify different versions of a dependency,
&gt; one in compile scope and one in test, only one of them gets 'noticed'.
&gt; I've detailed the problem on Stack Overflow
&gt; (http://stackoverflow.com/questions/9364511/maven-different-dependency-
version-in-test),
&gt; but I'll repeat the explanation here.
&gt; 
&gt; In my project I need to depend on a Cloudera distribution of Hadoop
&gt; and a 'vanilla' version for JUnit testing, as the former only works on
&gt; *nix.
&gt; 
&gt; When I try and execute my application, I get Exception in thread
&gt; "main" java.lang.NoClassDefFoundError:
&gt; org/apache/hadoop/conf/Configuration. When I run JUnit tests from
&gt; Maven or Eclipse, everything works fine. If I comment out the test
&gt; dependencies, the application runs successfully, but then the tests
&gt; fail because they're using the wrong version.
&gt; 
&gt; Why is the compile dependency getting ignored when the test dependency
&gt; is uncommented?
&gt; 
&gt;     &lt;dependency&gt;
&gt;         &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;
&gt;         &lt;artifactId&gt;hadoop-core&lt;/artifactId&gt;
&gt;         &lt;version&gt;0.20.2-cdh3u2&lt;/version&gt;
&gt;         &lt;scope&gt;compile&lt;/scope&gt;
&gt;     &lt;/dependency&gt;
&gt; 
&gt;     &lt;dependency&gt;
&gt;         &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;
&gt;         &lt;artifactId&gt;hadoop-core&lt;/artifactId&gt;
&gt;         &lt;version&gt;1.0.0&lt;/version&gt;
&gt;         &lt;scope&gt;test&lt;/scope&gt;
&gt;     &lt;/dependency&gt;
&gt; 
&gt;     &lt;dependency&gt;
&gt;         &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;
&gt;         &lt;artifactId&gt;hadoop-test&lt;/artifactId&gt;
&gt;         &lt;version&gt;1.0.0&lt;/version&gt;
&gt;         &lt;scope&gt;test&lt;/scope&gt;
&gt;     &lt;/dependency&gt;
&gt; 
&gt; mvn dependency:list shows the following, which does not show the
&gt; compile scoped version at all:
&gt; 
&gt; [INFO] The following files have been resolved:
&gt; [INFO]    ant:ant:jar:1.6.5:test
&gt; [INFO]    aopalliance:aopalliance:jar:1.0:compile
&gt; [INFO]    asm:asm:jar:3.3.1:compile
&gt; [INFO]    cglib:cglib:jar:2.2.2:compile
&gt; [INFO]    ch.qos.logback:logback-classic:jar:1.0.0:compile
&gt; [INFO]    ch.qos.logback:logback-core:jar:1.0.0:compile
&gt; [INFO]    com.google.guava:guava:jar:r08:compile
&gt; [INFO]    com.h2database:h2:jar:1.3.164:test
&gt; [INFO]    com.jolbox:bonecp:jar:0.7.1.RELEASE:compile
&gt; [INFO]    com.sun.jersey:jersey-core:jar:1.11:test
&gt; [INFO]    commons-beanutils:commons-beanutils:jar:1.7.0:test
&gt; [INFO]    commons-beanutils:commons-beanutils-core:jar:1.8.0:test
&gt; [INFO]    commons-cli:commons-cli:jar:1.2:test
&gt; [INFO]    commons-codec:commons-codec:jar:1.4:test
&gt; [INFO]    commons-collections:commons-collections:jar:3.2.1:test
&gt; [INFO]    commons-configuration:commons-configuration:jar:1.6:test
&gt; [INFO]    commons-digester:commons-digester:jar:1.8:test
&gt; [INFO]    commons-el:commons-el:jar:1.0:test
&gt; [INFO]    commons-httpclient:commons-httpclient:jar:3.0.1:test
&gt; [INFO]    commons-lang:commons-lang:jar:2.4:test
&gt; [INFO]    commons-logging:commons-logging:jar:1.1.1:compile
&gt; [INFO]    commons-net:commons-net:jar:1.4.1:test
&gt; [INFO]    hsqldb:hsqldb:jar:1.8.0.10:test
&gt; [INFO]    junit:junit:jar:4.10:test
&gt; [INFO]    mysql:mysql-connector-java:jar:5.1.18:compile
&gt; [INFO]    net.java.dev.jets3t:jets3t:jar:0.7.1:test
&gt; [INFO]    net.sf.kosmosfs:kfs:jar:0.3:test
&gt; [INFO]    org.apache.commons:commons-math:jar:2.1:test
&gt; [INFO]    org.apache.ftpserver:ftplet-api:jar:1.0.0:test
&gt; [INFO]    org.apache.ftpserver:ftpserver-core:jar:1.0.0:test
&gt; [INFO]    org.apache.ftpserver:ftpserver-deprecated:jar:1.0.0-M2:test
&gt; [INFO]    org.apache.hadoop:hadoop-core:jar:1.0.0:test
&gt; [INFO]    org.apache.hadoop:hadoop-test:jar:1.0.0:test
&gt; [INFO]    org.apache.mina:mina-core:jar:2.0.0-M5:test
&gt; [INFO]    org.codehaus.jackson:jackson-core-asl:jar:1.0.1:test
&gt; [INFO]    org.codehaus.jackson:jackson-mapper-asl:jar:1.0.1:test
&gt; [INFO]    org.eclipse.jdt:core:jar:3.1.1:test
&gt; [INFO]    org.hamcrest:hamcrest-core:jar:1.1:test
&gt; [INFO]    org.liquibase:liquibase-core:jar:2.0.3:test
&gt; [INFO]    org.liquibase.ext:liquibase-slf4j:jar:0.0.1:test
&gt; [INFO]    org.mortbay.jetty:jetty:jar:6.1.26:test
&gt; [INFO]    org.mortbay.jetty:jetty-util:jar:6.1.26:test
&gt; [INFO]    org.mortbay.jetty:jsp-2.1:jar:6.1.14:test
&gt; [INFO]    org.mortbay.jetty:jsp-api-2.1:jar:6.1.14:test
&gt; [INFO]    org.mortbay.jetty:servlet-api:jar:2.5-20081211:test
&gt; [INFO]    org.mortbay.jetty:servlet-api-2.5:jar:6.1.14:test
&gt; [INFO]    org.slf4j:jcl-over-slf4j:jar:1.6.4:compile
&gt; [INFO]    org.slf4j:log4j-over-slf4j:jar:1.6.4:compile
&gt; [INFO]    org.slf4j:slf4j-api:jar:1.6.4:compile
&gt; [INFO]    org.springframework:spring-aop:jar:3.1.1.RELEASE:compile
&gt; [INFO]    org.springframework:spring-asm:jar:3.1.1.RELEASE:compile
&gt; [INFO]    org.springframework:spring-beans:jar:3.1.1.RELEASE:compile
&gt; [INFO]    org.springframework:spring-context:jar:3.1.1.RELEASE:compile
&gt; [INFO]   
&gt; [org.springframework:spring-context-support:jar:3.1.1.RELEASE:compile
&gt; [INFO]    org.springframework:spring-core:jar:3.1.1.RELEASE:compile
&gt; [INFO]    org.springframework:spring-expression:jar:3.1.1.RELEASE:compile
&gt; [INFO]    org.springframework:spring-jdbc:jar:3.1.1.RELEASE:compile
&gt; [INFO]    org.springframework:spring-test:jar:3.1.1.RELEASE:test
&gt; [INFO]    org.springframework:spring-tx:jar:3.1.1.RELEASE:compile
&gt; [INFO]   
&gt; [org.springframework.data:spring-data-hadoop:jar:1.0.0.BUILD-SNAPSHOT:c
&gt; ompile
&gt; [INFO]    oro:oro:jar:2.0.8:test
&gt; [INFO]    tomcat:jasper-compiler:jar:5.5.12:test
&gt; [INFO]    tomcat:jasper-runtime:jar:5.5.12:test
&gt; [INFO]    xmlenc:xmlenc:jar:0.52:test
&gt; 
&gt; I've worked around the issue for now by using profile properties, but
&gt; I thought it would be worth mentioning this on the Maven list in case
&gt; it turns out to be a bug.

No, it is by design. Maven will always resolve the same dependency (in term 
of groupId:artifactId) to the "nearest" version.

Regards,
Jörg


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/maven-users/201202.mbox/raw/%3cji264r$71n$1@dough.gmane.org%3e/">Unnamed text/plain</a> (inline, 8-Bit, 6102 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/maven-users/201202.mbox/raw/%3cji264r$71n$1@dough.gmane.org%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
